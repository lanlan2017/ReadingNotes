<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.1.0">

<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/ReadingNotes/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/ReadingNotes/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/ReadingNotes/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/ReadingNotes/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="_Sly-yzHYmALHXzjFpPWsodMrjBSphw7bfRbMUH80Qc">
  <meta name="msvalidate.01" content="B1CFD346B8DEBBFE0C983C2AF8955531">
  <meta name="baidu-site-verification" content="vkMTwK56xr">

<link rel="stylesheet" href="/ReadingNotes/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"lanlan2017.github.io","root":"/ReadingNotes/","images":"/ReadingNotes/images","scheme":"Gemini","darkmode":true,"version":"8.11.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/ReadingNotes/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/ReadingNotes/js/config.js"></script>

    <meta name="description" content="好好学习，天天向上">
<meta property="og:type" content="website">
<meta property="og:title" content="蓝蓝站点">
<meta property="og:url" content="https://lanlan2017.github.io/ReadingNotes/page/56/index.html">
<meta property="og:site_name" content="蓝蓝站点">
<meta property="og:description" content="好好学习，天天向上">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="蓝蓝">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lanlan2017.github.io/ReadingNotes/page/56/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/56/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>蓝蓝站点</title>
  

  <script src="/ReadingNotes/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?dadeb188eb14ccde0b25a19230c429b5"></script>



<link rel="dns-prefetch" href="https://waline-test-lanlan2017.vercel.app">
  <noscript>
    <link rel="stylesheet" href="/ReadingNotes/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/ReadingNotes/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">蓝蓝站点</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">读书笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/ReadingNotes/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-dir"><a href="/ReadingNotes/dir/" rel="section"><i class="fa fa-sitemap fa-fw"></i>目录</a></li><li class="menu-item menu-item-categories"><a href="/ReadingNotes/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/ReadingNotes/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-tags"><a href="/ReadingNotes/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="蓝蓝"
      src="/ReadingNotes/images/avatar.gif">
  <p class="site-author-name" itemprop="name">蓝蓝</p>
  <div class="site-description" itemprop="description">好好学习，天天向上</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/ReadingNotes/archives/">
          <span class="site-state-item-count">594</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/ReadingNotes/categories/">
        <span class="site-state-item-count">184</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://lanlan2017.github.io/todo/" title="todo → https:&#x2F;&#x2F;lanlan2017.github.io&#x2F;todo&#x2F;"><i class="fa fa-check-square fa-fw"></i>todo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://lanlan2017.github.io/links/" title="links → https:&#x2F;&#x2F;lanlan2017.github.io&#x2F;links&#x2F;"><i class="fa fa-link fa-fw"></i>links</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/ReadingNotes/550a73ea/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/ReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蓝蓝站点">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ReadingNotes/550a73ea/" class="post-title-link" itemprop="url">第2部分 Java程序设计</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-07-02 17:11:50" itemprop="dateCreated datePublished" datetime="2019-07-02T17:11:50+08:00">2019-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-12-17 02:00:55" itemprop="dateModified" datetime="2019-12-17T02:00:55+08:00">2019-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/Java%E7%A8%8B%E5%BA%8F%E5%91%98%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">Java程序员面试宝典 第4版</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/Java%E7%A8%8B%E5%BA%8F%E5%91%98%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8-%E7%AC%AC4%E7%89%88/%E7%AC%AC2%E9%83%A8%E5%88%86-Java%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">第2部分 Java程序设计</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/ReadingNotes/550a73ea/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/ReadingNotes/550a73ea/" data-xid="/ReadingNotes/550a73ea/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>743</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <div id='my_toc'><a href="/ReadingNotes/550a73ea/#第2部分-Java程序设计" class="header_1">第2部分 Java程序设计</a>&nbsp;<br></div>
<style>.header_1{margin-left: 1em;}.header_2{margin-left: 2em;}.header_3{margin-left: 3em;}.header_4{margin-left: 4em;}.header_5{margin-left: 5em;}.header_6{margin-left: 6em;}</style>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/ReadingNotes/550a73ea/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/ReadingNotes/af245703/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/ReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蓝蓝站点">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ReadingNotes/af245703/" class="post-title-link" itemprop="url">第5章 Java程序设计基本概念</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-07-02 14:03:39" itemprop="dateCreated datePublished" datetime="2019-07-02T14:03:39+08:00">2019-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-12-17 02:00:55" itemprop="dateModified" datetime="2019-12-17T02:00:55+08:00">2019-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/Java%E7%A8%8B%E5%BA%8F%E5%91%98%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">Java程序员面试宝典 第4版</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/Java%E7%A8%8B%E5%BA%8F%E5%91%98%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8-%E7%AC%AC4%E7%89%88/%E7%AC%AC2%E9%83%A8%E5%88%86-Java%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">第2部分 Java程序设计</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/Java%E7%A8%8B%E5%BA%8F%E5%91%98%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8-%E7%AC%AC4%E7%89%88/%E7%AC%AC2%E9%83%A8%E5%88%86-Java%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E7%AC%AC5%E7%AB%A0-Java%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" itemprop="url" rel="index"><span itemprop="name">第5章 Java程序设计基本概念</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/ReadingNotes/af245703/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/ReadingNotes/af245703/" data-xid="/ReadingNotes/af245703/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>502</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <div id='my_toc'><a href="/ReadingNotes/af245703/#第5章-Java程序设计基本概念" class="header_1">第5章 Java程序设计基本概念</a>&nbsp;<br><a href="/ReadingNotes/af245703/#5-1-JVM" class="header_2">5. 1 JVM</a>&nbsp;<br></div>
<style>.header_1{margin-left: 1em;}.header_2{margin-left: 2em;}.header_3{margin-left: 3em;}.header_4{margin-left: 4em;}.header_5{margin-left: 5em;}.header_6{margin-left: 6em;}</style>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/ReadingNotes/af245703/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/ReadingNotes/87b0a2b5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/ReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蓝蓝站点">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ReadingNotes/87b0a2b5/" class="post-title-link" itemprop="url">3.5 移除事件处理程序</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-07-02 00:28:12" itemprop="dateCreated datePublished" datetime="2019-07-02T00:28:12+08:00">2019-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-12-17 02:00:55" itemprop="dateModified" datetime="2019-12-17T02:00:55+08:00">2019-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">jQuery基础教程 第4版</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/%E7%AC%AC3%E7%AB%A0-%E4%BA%8B%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">第3章 事件</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/ReadingNotes/87b0a2b5/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/ReadingNotes/87b0a2b5/" data-xid="/ReadingNotes/87b0a2b5/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="3-5-移除事件处理程序"><a href="#3-5-移除事件处理程序" class="headerlink" title="3.5 移除事件处理程序"></a>3.5 移除事件处理程序</h1><p>有时候,我们需要<strong>停用以前注册的事件处理程序</strong>。可能是因为页面的状态发生了变化,导致相应的操作不再有必要。处理这种情形的一种典型做法,就是在事件处理程序中使用条件语句。但是,如果能够完全移除处理程序绑定显然更有效率。<br>假设我们希望折叠样式转换器在页面没有使用正常样式的情况下保持扩展状态, 即当<code>Narrow Column</code>或<code>Large Print</code>按钮被选中时,单击样式转换器的背景区域不应该引发任何操作。为此,可以在单击非默认样式转换按钮时,调用<code>.off()</code>方法移除折叠处理程序,如代码清单3-18所示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#switcher-narrow, #switcher-large&#x27;</span>).click(function () &#123;</span><br><span class="line"><span class="comment">// 移除DOM上的click程序,即折叠处理程序</span></span><br><span class="line">$(<span class="string">&#x27;#switcher&#x27;</span>).off(<span class="string">&#x27;click&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>现在,如果单击<code>Narrow Column</code>按钮,样式转换器(<code>&lt;div&gt;</code>)上的单击处理程序就会被移除。然后,再单击背景区域将不会导致它折叠起来。但是,按钮本身的作用却失效了!由于为使用事件委托而重写了按钮处理代码,因此按钮本身也带有样式转换器(<code>&lt;div&gt;</code>)的单击事件处理程序。换句话说,在调用<code>$(&#39;#switcher&#39;).off(&#39;click&#39;)</code>时,会导致按钮上绑定的两个事件处理程序都被移除。</p>
<h2 id="3-5-1-为事件处理程序添加命名空间"><a href="#3-5-1-为事件处理程序添加命名空间" class="headerlink" title="3.5.1 为事件处理程序添加命名空间"></a>3.5.1 为事件处理程序添加命名空间</h2><p>显然,应该让对<code>.off()</code>的调用更有针对性,以避免把注册的两个单击处理程序全都移除。达成目标的一种方式是使用<code>事件命名空间</code>,即<code>在绑定事件时引入附加信息,以便将来识别特定的处理程序</code>。要使用命名空间,需要退一步使用绑定事件处理程序的非简写方法,即<code>.on()</code>方法本身。<br>我们为<code>.on()</code>方法传递的第一个参数,应该是想要截获的事件的名称。不过,在此可以使用一种特殊的语法形式,即对事件加以细分,参见代码清单3-19。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(document).ready(function() &#123; </span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).on(<span class="string">&#x27;click.collapse&#x27;</span>, function(event) &#123; </span><br><span class="line">    <span class="keyword">if</span> (!$(event.target).is(<span class="string">&#x27;button&#x27;</span>)) &#123; </span><br><span class="line">      $(<span class="string">&#x27;#switcher button&#x27;</span>).toggleClass(<span class="string">&#x27;hidden&#x27;</span>); </span><br><span class="line">    &#125; </span><br><span class="line">  &#125;); </span><br><span class="line">  $(<span class="string">&#x27;#switcher-narrow, #switcher-large&#x27;</span>).click(function() &#123; </span><br><span class="line">    $(<span class="string">&#x27;#switcher&#x27;</span>).off(<span class="string">&#x27;click.collapse&#x27;</span>); </span><br><span class="line">  &#125;); </span><br><span class="line">&#125;); </span><br></pre></td></tr></table></figure>
<p>对于事件处理系统而言,后缀<code>.collapse</code>是不可见的。换句话说,这里仍然会像编写<code>.on(&#39;click&#39;)</code>一样,让注册的函数响应单击事件。但是,通过附加的命名空间信息,则可以解除对这个特定处理程序的绑定,同时不影响为按钮注册的其他单击处理程序。</p>
<h2 id="3-5-2-重新绑定事件"><a href="#3-5-2-重新绑定事件" class="headerlink" title="3.5.2 重新绑定事件"></a>3.5.2 重新绑定事件</h2><p>现在单击<code>Narrow Column</code>或<code>Large Print</code>按钮,会导致样式转换器的折叠功能失效。可是,我们希望该功能在单击<code>Default</code>按钮时恢复。为此,应该在<code>Default</code>按钮被单击时,重新绑定事件处理程序。<br>首先,应该为事件处理程序起个名字,以便多次使用,参见代码清单3-20。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">  <span class="keyword">var</span> toggleSwitcher = <span class="keyword">function</span>(<span class="params">event</span>) &#123; </span><br><span class="line">    <span class="keyword">if</span> (!$(event.<span class="property">target</span>).<span class="title function_">is</span>(<span class="string">&#x27;button&#x27;</span>)) &#123; </span><br><span class="line">      $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;hidden&#x27;</span>); </span><br><span class="line">    &#125; </span><br><span class="line">  &#125;; </span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click.collapse&#x27;</span>, toggleSwitcher); </span><br><span class="line">&#125;); </span><br></pre></td></tr></table></figure>
<p>我们注意到,这里使用了另一种定义函数的语法,即没有使用函数声明(前置<code>function</code>关键字) ,而是将一个<code>匿名函数</code>表达式指定给了一个<code>局部变量</code>。除了两点微妙的差异(但在这里并不存在)之外,无论使用哪种语法,它们的功能都是等价的。这里使用函数表达式只是为了从形式上让事件处理程序与其他函数定义显得类似。<br>而且,我们知道传递给<code>.on()</code>的第二个参数是一个函数引用。在此需要强调一点,<strong>使用命名函数时,必须省略函数名称后面的圆括号</strong>。圆括号会导致函数被<code>调用</code>,而非被<code>引用</code>。<br>在函数有了可以引用的名字之后,将来就可以再次绑定而无需重新定义它了,如代码清单3-21所示</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//未完成的代码 </span></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">  <span class="keyword">var</span> toggleSwitcher = <span class="keyword">function</span>(<span class="params">event</span>) &#123; </span><br><span class="line">    <span class="keyword">if</span> (!$(event.<span class="property">target</span>).<span class="title function_">is</span>(<span class="string">&#x27;button&#x27;</span>)) &#123; </span><br><span class="line">      $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;hidden&#x27;</span>); </span><br><span class="line">    &#125; </span><br><span class="line">  &#125;; </span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click.collapse&#x27;</span>, toggleSwitcher); </span><br><span class="line">  $(<span class="string">&#x27;#switcher-narrow, #switcher-large&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">    $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">off</span>(<span class="string">&#x27;click.collapse&#x27;</span>); </span><br><span class="line">  &#125;); </span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">    $(<span class="string">&#x27;#switcher&#x27;</span>) </span><br><span class="line">      .<span class="title function_">on</span>(<span class="string">&#x27;click.collapse&#x27;</span>, toggleSwitcher); </span><br><span class="line">  &#125;); </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这样,切换样式转换器的行为当文档加载后会被绑定。当单击<code>Narrow Column</code>或<code>Large Print</code>按钮时会解除绑定,而当此后再单击<code>Default</code>按钮时,又会恢复绑定。<br>使用命名函数还有另外一个好处,即不必再使用事件命名空间。因为<code>.off()</code>可以将这个命名函数作为第二个参数,结果只会解除对特定处理程序的绑定。但这样就会遇到另一个问题,当在<code>jQuery</code>中把处理程序绑定到事件时,之前绑定的处理程序仍然有效。在这个例子中,每次点击<code>Default</code>,就会有一个<code>toggleSwitcher</code>的副本被绑定到样式转换器。换句话说,在用户单击<code>Narrow</code>或<code>Large Print</code>之前(这样就可以一次性地解除对<code>toggleSwitcher</code>的绑定),每多单击一次都会多调用一次这个函数。<br>在绑定<code>toggleSwitcher</code>偶数次的情况下,单击样式转换器(不是按钮),好像一切都没有发生变化。事实上,这是因为切换了<code>hidden</code>类偶数次,结果状态与开始的时候相同。为了解决这个问题,可以在用户单击任意按钮时解除绑定,并在确定单击按钮的ID是<code>switcher-default</code>的情况下再重新绑定,参见代码清单3-22。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 定义命名函数</span></span><br><span class="line">  <span class="keyword">var</span> toggleSwitcher = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!$(event.<span class="property">target</span>).<span class="title function_">is</span>(<span class="string">&#x27;button&#x27;</span>)) &#123;</span><br><span class="line">      $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;hidden&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// 一上来就注册点击事件处理程序toggleSwitcher</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, toggleSwitcher);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 移除点击事件处理程序toggleSwitcher</span></span><br><span class="line">    $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">off</span>(<span class="string">&#x27;click&#x27;</span>, toggleSwitcher);</span><br><span class="line">    <span class="comment">// 该按钮时默认按钮</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">id</span> == <span class="string">&#x27;switcher-default&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// 注册点击事件处理程序toggleSwitcher</span></span><br><span class="line">      <span class="comment">// 同一个DOM上可以用多个点击事件处理程序,</span></span><br><span class="line">      $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, toggleSwitcher);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>对于只需触发一次,随后要立即解除绑定的情况也有一种简写方法——<code>.one()</code>,这个简写方法的用法如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">one</span>(<span class="string">&#x27;click&#x27;</span>, toggleSwitcher); </span><br></pre></td></tr></table></figure>
<p>这样会使切换操作只发生一次，之后就再也不会发生。 </p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><!--SSTStart-->
<h2 id="off方法"><a href="#off方法" class="headerlink" title="off方法"></a>off方法</h2><p><code>$(选择符).off(&quot;方法名称&quot;)</code>这个方法可以移除事件处理程序 </p>
<h3 id="移除事件上的所有事件处理方法"><a href="#移除事件上的所有事件处理方法" class="headerlink" title="移除事件上的所有事件处理方法"></a>移除事件上的所有事件处理方法</h3><p>如<code>$(&#39;#switcher&#39;).off(&#39;click&#39;);</code>可以移除id为<code>switcher</code>的<code>DOM</code>元素上<code>click</code>这个事件注册的所有处理方法。</p>
<h3 id="移除事件命名空间上的所有事假处理方法"><a href="#移除事件命名空间上的所有事假处理方法" class="headerlink" title="移除事件命名空间上的所有事假处理方法"></a>移除事件命名空间上的所有事假处理方法</h3><p>为了更精确的设置事件处理方法,可以给事件指定命名空间,在off方法上传入事件命名空间,可以移除该事件命名空间上的所有方法,例如: <code>$(&#39;#switcher&#39;).off(&#39;click.collapse&#39;)</code>; 这个方法可以移除事件命名空间click.collapse上所有的事件处理方法.</p>
<h3 id="命名函数"><a href="#命名函数" class="headerlink" title="命名函数"></a>命名函数</h3><p>所谓命名函数,将一个<code>匿名函数</code>表达式指定给了一个<code>局部变量</code>,这个局部变量就是一个命名函数.引用命名函数时不要带括号,带括号会使得函数被调用,而不是被引用.</p>
<h3 id="移除命名的事件处理方法"><a href="#移除命名的事件处理方法" class="headerlink" title="移除命名的事件处理方法"></a>移除命名的事件处理方法</h3><p>可以把事件处理方法赋值给一个变量,也就是给事件处理方法命名,这样的话,off方法可以直接移除事件上的该方法,而不需要指定命名空间,例如:<code>$(&#39;#switcher&#39;).off(&#39;click&#39;, toggleSwitcher)</code>;</p>
<h2 id="one方法"><a href="#one方法" class="headerlink" title="one方法"></a>one方法</h2><p><code>one</code>方法可以触发一次,触发后立即解除.</p>
<!--SSTStop-->



      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/ReadingNotes/a4e0166f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/ReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蓝蓝站点">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ReadingNotes/a4e0166f/" class="post-title-link" itemprop="url">3.4 通过事件对象改变事件的旅程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-07-01 23:19:00" itemprop="dateCreated datePublished" datetime="2019-07-01T23:19:00+08:00">2019-07-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-12-17 02:00:55" itemprop="dateModified" datetime="2019-12-17T02:00:55+08:00">2019-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">jQuery基础教程 第4版</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/%E7%AC%AC3%E7%AB%A0-%E4%BA%8B%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">第3章 事件</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/ReadingNotes/a4e0166f/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/ReadingNotes/a4e0166f/" data-xid="/ReadingNotes/a4e0166f/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>7.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>7 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="3-4-通过事件对象改变事件的旅程"><a href="#3-4-通过事件对象改变事件的旅程" class="headerlink" title="3.4 通过事件对象改变事件的旅程"></a>3.4 通过事件对象改变事件的旅程</h1><p>我们在前面已经举例说明事件冒泡可能会导致问题的一种情形。为了展示一种<code>.hover()</code>也无能为力的情况,需要改变前面实现的折叠行为。<br>假设我们希望增大触发样式转换器折叠或扩展的可单击区域。一种方案就是将事件处理程序从标签移至包含它的<code>&lt;div&gt;</code>元素。在代码清单3-9中,我们给<code>#switcher h3</code>添加了一个<code>click</code>处理程序,在这里我们要尝试给<code>#switcher</code>添加这个处理程序,如代码清单3-11所示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;hidden&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这种改变会使样式转换器的整个区域都可以通过单击切换其可见性。但同时也造成了一个问题,即单击按钮会在修改内容区的样式之后折叠样式转换器。导致这个问题的原因就是<code>事件冒泡</code>,即事件首先被按钮处理,然后又沿着<code>DOM</code>树向上传递,直至到达<code>&lt;div id=&quot;switcher&quot;&gt;</code>激活事件处理程序并隐藏按钮。<br>要解决这个问题,必须访问<code>事件对象</code>。<strong>事件对象是一种<code>DOM</code>结构,它会在元素获得处理事件的机会时传递给被调用的事件处理程序</strong>。这个对象中包含着与事件有关的信息(例如事件发生时的鼠标指针位置),也提供了可以用来影响事件在<code>DOM</code>中传递进程的一些方法。<br>为了在处理程序中使用事件对象,需要为函数添加一个参数:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params">event</span>) &#123; </span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;hidden&#x27;</span>); </span><br><span class="line">  &#125;); </span><br><span class="line">&#125;); </span><br></pre></td></tr></table></figure>
<p>注意,这里把事件对象命名为<code>event</code>,这主要是为了让大家一看就知道它是什么对象,不是必须这样命名的。就算你把它命名为<code>flapjacks</code>(煎饼),也没有任何问题。</p>
<h2 id="3-4-1-事件目标"><a href="#3-4-1-事件目标" class="headerlink" title="3.4.1 事件目标"></a>3.4.1 事件目标</h2><p>现在,事件处理程序中的变量<code>event</code>保存着事件对象。而**<code>event.target</code>属性保存着发生事件的目标元素<strong>。这个属性是<code>DOM API</code>中规定的,但是没有在某些旧版本的浏览器中实现。<code>jQuery</code>对这个事件对象进行了必要的扩展,从而在任何浏览器中都能够使用这个属性。</strong>通过<code>event.target</code>,可以确定<code>DOM</code>中首先接收到事件的元素**(即实际被单击的元素)。而且,我们知道**<code>this</code>引用的是处理事件的<code>DOM</code>元素**,所以可以编写出代码清单3-12。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// 只处理实际被点击的DOM元素</span></span><br><span class="line">    <span class="comment">// this表示DOM元素,包括实际被点击的DOM元素,及其祖先元素(id为switcher的为最顶层的祖先).</span></span><br><span class="line">    <span class="keyword">if</span> (event.<span class="property">target</span> == <span class="variable language_">this</span>) &#123;</span><br><span class="line">      $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;hidden&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>此时的代码确保了被单击的元素是<code>&lt;div id=&quot;switcher&quot;&gt;</code>,而不是其他后代元素。现在,单击按钮不会再折叠样式转换器,而单击转换器背景区则会触发折叠操作。但是,单击标签(<code>&lt;h3&gt;</code>)同样什么也不会发生,因为它也是一个后代元素。实际上,我们可以不把检查代码放在这里,而是通过修改按钮的行为来达到目标。</p>
<h2 id="3-4-2-停止事件传播"><a href="#3-4-2-停止事件传播" class="headerlink" title="3.4.2 停止事件传播"></a>3.4.2 停止事件传播</h2><p><strong>事件对象还提供了一个<code>.stopPropagation()</code>方法,该方法可以完全阻止事件冒泡</strong>。与<code>.target</code>类似,这个方法也是一种基本的<code>DOM</code>特性,但在<code>IE8</code>及更早版本中则无法安全地使用。不过,只要我们通过<code>jQuery</code>来注册所有的事件处理程序,就可以放心地使用这个方法。<br>下面,我们会删除刚才添加的检查语句<code>event.target == this</code>,并在按钮的单击处理程序中添加一些代码,参见代码清单3-13。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 鼠标进出时调用</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher h3&#x27;</span>).<span class="title function_">hover</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;hover&#x27;</span>);</span><br><span class="line">  &#125;, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;hover&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 背景的事件处理程序</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;hidden&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 按钮的点击事件处理程序</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// 动态生成class属性</span></span><br><span class="line">    <span class="keyword">var</span> bodyClass = <span class="variable language_">this</span>.<span class="property">id</span>.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>().<span class="title function_">addClass</span>(bodyClass);</span><br><span class="line"></span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    <span class="comment">// 停止事件传播,该事件不会传播到祖先元素</span></span><br><span class="line">    event.<span class="title function_">stopPropagation</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>同以前一样,需要为用作单击处理程序的函数添加一个参数,以便访问事件对象。然后,通过调用<code>event.stopPropagation()</code>就可以避免其他所有<code>DOM</code>元素响应这个事件。这样一来,<strong>单击按钮的事件会被按钮处理,而且只会被按钮处理</strong>。单击样式转换器的其他地方则可以折叠和扩展整个区域。</p>
<h2 id="3-4-3-阻止默认操作"><a href="#3-4-3-阻止默认操作" class="headerlink" title="3.4.3 阻止默认操作"></a>3.4.3 阻止默认操作</h2><p>如果我们把单击事件处理程序注册到锚元素(<code>&lt;a&gt;</code>),而不是外层的<code>&lt;div&gt;</code>上,那么就要面对另外一个问题:当用户单击链接时,浏览器会加载一个新页面。这种行为与我们讨论的事件处理程序不是同一个概念,它是单击锚元素的默认操作。类似地,当用户在编辑完表单后按下回车键时,会触发表单的<code>submit</code>事件,在此事件发生后,表单提交才会真正发生。<br>即便在事件对象上调用<code>event.stopPropagation()</code>方法也不能禁止这种默认操作,因为默认操作不是在正常的事件传播流中发生的。在这种情况下,<code>event.preventDefault()</code>方法则可以在触发默认操作之前终止事件。</p>
<p>在事件的环境中完成了某些验证之后,通常会用到<code>event.preventDefault()</code>。例如,在表单提交期间,我们会对用户是否填写了必填字段进行检查,如果用户没有填写相应字段,那么就需要阻止默认操作。</p>
<p>事件传播和默认操作是相互独立的两套机制,在二者任何一方发生时,都可以终止另一方。如果想要同时停止事件传播和默认操作,可以在事件处理程序中返回<code>false</code>,这是对在事件对象上同时调用<code>.stopPropagation()</code>和<code>.preventDefault()</code>的一种简写方式。</p>
<h2 id="3-4-4-事件委托"><a href="#3-4-4-事件委托" class="headerlink" title="3.4.4 事件委托"></a>3.4.4 事件委托</h2><p>事件冒泡并不总是带来问题,也可以利用它为我们带来好处。<code>事件委托</code>就是利用冒泡的一项高级技术。通过<code>事件委托</code>,可以借助一个元素上的事件处理程序完成很多工作。<br>在我前面的例子中,只有3个<code>&lt;div class=&quot;button&quot;&gt;</code>元素注册了单击处理程序。假如我们想为更多元素注册处理程序怎么办?这种情况比我们想象的更常见。例如,有一个显示信息的大型表格,每一行都有一项需要注册单击处理程序。虽然不难通过隐式迭代来指定所有单击处理程序,但性能可能会很成问题,因为循环是由<code>jQuery</code>在内部完成的,而且要维护所有处理程序也需要占用很多内存。<br>为解决这个问题,<strong>可以只在<code>DOM</code>中的一个祖先元素上指定一个单击处理程序。由于事件会冒泡,未遭拦截的单击事件最终会到达这个祖先元素,而我们可以在此时再作出相应处理</strong>。<br>下面我们就以样式转换器为例(尽管其中的按钮数量还不至于使用这种方法),说明如何用这种技术。从代码清单3-12中可以看到,当发生单击事件时,<strong>可以使用<code>event.target</code>属性查鼠标指针下方是什么元素</strong>。下面是代码清单3-14。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher h3&#x27;</span>).<span class="title function_">hover</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;hover&#x27;</span>);</span><br><span class="line">  &#125;, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;hover&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// 隐藏所有的按钮</span></span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;hidden&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果触发这个事件的DOM元素时按钮的话</span></span><br><span class="line">    <span class="keyword">if</span> ($(event.<span class="property">target</span>).<span class="title function_">is</span>(<span class="string">&#x27;button&#x27;</span>)) &#123;</span><br><span class="line">      <span class="comment">// 根据该DOM元素(event.target)的id生成class属性值</span></span><br><span class="line">      <span class="keyword">var</span> bodyClass = event.<span class="property">target</span>.<span class="property">id</span>.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line">      <span class="comment">// 移除body元素上的所有class,然后再添加生成的class</span></span><br><span class="line">      $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>().<span class="title function_">addClass</span>(bodyClass);</span><br><span class="line">      <span class="comment">// 所有按钮都不选中</span></span><br><span class="line">      $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">      <span class="comment">// 选中当前的按钮</span></span><br><span class="line">      $(event.<span class="property">target</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">      <span class="comment">// 阻止事件冒泡</span></span><br><span class="line">      event.<span class="title function_">stopPropagation</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这里使用了一个新方法,即<code>.is()</code>方法。这个方法接收一个选择符表达式(第2章介绍过) ,然后用选择符来测试当前的<code>jQuery</code>对象。如果集合中至少有一个元素与选择符匹配, <code>.is()</code>方法返回<code>true</code>。在这个例子中,<code>$(event.target).is(&#39;button&#39;)</code>测试被单击的元素是否包含<code>button</code>标签。如果是,则继续执行以前编写的那些代码——但有一个明显的不同,即此时的关键字<code>this</code>引用的是<code>&lt;div id=&quot;switcher&quot;&gt;</code>。换句话说,如果现在需要访问被单击的按钮,每次都必须通过<code>event.target</code>来引用。</p>
<h3 id="is-与-96-hasClass"><a href="#is-与-96-hasClass" class="headerlink" title="is()与&#96;.hasClass()"></a>is()与&#96;.hasClass()</h3><p>要测试元素是否包含某个类,也可以使用另一个简写方法<code>.hasClass()</code>,不过,<code>.is()</code>方法则更灵活一些,它可以测试任何选择符表达式。</p>
<p>然而,以上代码还有一个不期而至的连带效果。当按钮被单击时,转换器会折叠起来,就像没有使用<code>.stopPropagation()</code>之前看到的效果一样。用于切换转换器可见性的处理程序,现在被绑定到了按钮上面。因此,阻止事件冒泡并不会影响切换发生。要解决这个问题,可以去掉对<code>.stopPropagation()</code>的调用,然后添加另一个<code>.is()</code>测试。同样,随着把整个转换器<code>&lt;div&gt;</code>变得可以单击,还应该在用户鼠标悬停时切换<code>hover</code>类,如代码清单3-15所示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 鼠标悬停事件</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">hover</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;hover&#x27;</span>);</span><br><span class="line">  &#125;, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;hover&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果触发事件的DOM元素不是按钮的话</span></span><br><span class="line">    <span class="keyword">if</span> (!$(event.<span class="property">target</span>).<span class="title function_">is</span>(<span class="string">&#x27;button&#x27;</span>)) &#123;</span><br><span class="line">      <span class="comment">// 隐藏/显示这些按钮</span></span><br><span class="line">      $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;hidden&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果触发点击事件的DOM元素是按钮的话</span></span><br><span class="line">    <span class="keyword">if</span> ($(event.<span class="property">target</span>).<span class="title function_">is</span>(<span class="string">&#x27;button&#x27;</span>)) &#123;</span><br><span class="line">      <span class="keyword">var</span> bodyClass = event.<span class="property">target</span>.<span class="property">id</span>.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">      $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>().<span class="title function_">addClass</span>(bodyClass);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">      $(event.<span class="property">target</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>虽然这个例子的代码显得稍微复杂了一点,但随着带有事件处理程序的元素数量增多,使用事件委托终究还是正确的技术。此外,通过组合两个<code>click</code>事件处理程序并使用基于<code>.is()</code>测试的<code>if-else</code>语句,可以减少重复的代码,参见代码清单3-16。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">hover</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;hover&#x27;</span>);</span><br><span class="line">  &#125;, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;hover&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;button&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> bodyClass = event.<span class="property">target</span>.<span class="property">id</span>.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>().<span class="title function_">addClass</span>(bodyClass);</span><br><span class="line"></span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>以上代码仍然有进一步优化的余地,但目前这种情况已经是可以接受的了。不过,为了更深入地理解<code>jQuery</code>的事件处理,我们还要返回代码清单3-16,继续在那个版本上修改。</p>
<h2 id="3-4-5-使用内置的事件委托功能"><a href="#3-4-5-使用内置的事件委托功能" class="headerlink" title="3.4.5 使用内置的事件委托功能"></a>3.4.5 使用内置的事件委托功能</h2><p>由于事件委托可以解决很多问题,所以<code>jQuery</code>专门提供了一组方法来实现事件委托。前面讨论过的<code>.on</code>()方法可以接受相应参数实现事件委托,如代码清单3-17所示:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#switcher&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;button&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">  <span class="keyword">var</span> bodyClass = event.<span class="property">target</span>.<span class="property">id</span>.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>]; </span><br><span class="line">  $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>().<span class="title function_">addClass</span>(bodyClass); </span><br><span class="line">  $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>); </span><br><span class="line">  $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>); </span><br><span class="line">&#125;); </span><br></pre></td></tr></table></figure>
<p>如果给<code>.on()</code>方法传入的第二个参数是一个<code>选择符表达式</code>,<code>jQuery</code>会把<code>click</code>事件处理程序绑定到<code>#switcher</code>对象,同时比较<code>event.target</code>和选择符表达式(这里的<code>&#39;button&#39;</code>)。</p>
<ul>
<li>如果<code>event.target</code>和选择符表达式匹配,<code>jQuery</code>会把<code>this</code>关键字映射到匹配的元素,</li>
<li>如果<code>event.target</code>和选择符表达式不匹配,则不会执行事件处理程序。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/ReadingNotes/21530484/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/ReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蓝蓝站点">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ReadingNotes/21530484/" class="post-title-link" itemprop="url">3.3 事件传播</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-07-01 15:05:23" itemprop="dateCreated datePublished" datetime="2019-07-01T15:05:23+08:00">2019-07-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-12-17 02:00:55" itemprop="dateModified" datetime="2019-12-17T02:00:55+08:00">2019-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">jQuery基础教程 第4版</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/%E7%AC%AC3%E7%AB%A0-%E4%BA%8B%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">第3章 事件</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/ReadingNotes/21530484/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/ReadingNotes/21530484/" data-xid="/ReadingNotes/21530484/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="3-3-事件传播"><a href="#3-3-事件传播" class="headerlink" title="3.3 事件传播"></a>3.3 事件传播</h1><p>在说明基于通常不可单击的页面元素处理单击事件的能力时,我们构思的界面中已经给出了一些提示——样式表切换器标签(即<code>&lt;h3&gt;</code>元素)实际上都是活动的,随时等待用户操作。为了改进界面,我们可以为按钮添加一种翻转状态,以便清楚地表明它们能与鼠标进行某种方式的交互:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hover</span> &#123; </span><br><span class="line">  <span class="attribute">cursor</span>: pointer; </span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#afa</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p><code>CSS</code>规范加入了一个名叫<code>:hover</code>的伪类选择符,这个选择符可以让样式表在用户鼠标指针悬停在某个元素上时,影响元素的外观。这个伪类选择符在某种程度上可以帮我们解决问题,但在这里,我们要介绍<code>jQuery</code>的<code>.hover</code>方法。这个方法可以让我们在鼠标指针进入元素和离开元素时,通过<code>JavaScript</code>来改变元素的样式——事实上是可以执行任意操作。</p>
<p>同前面介绍的简单事件方法不同,<code>.hover()</code>方法接受两个函数参数。</p>
<ul>
<li>第一个函数会在鼠标指针进入被选择的元素时执行,</li>
<li>第二个函数会在鼠标指针离开该元素时触发。</li>
</ul>
<p>我们可以在这些时候修改应用到按钮上的类,从而实现翻转效果,参见代码清单3-10。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher h3&#x27;</span>).<span class="title function_">hover</span>(</span><br><span class="line">    <span class="comment">//鼠标进入时触发</span></span><br><span class="line">    <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;hover&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 鼠标离开时触发</span></span><br><span class="line">    <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      $(<span class="variable language_">this</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;hover&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这里,我们再次使用隐式迭代和事件上下文实现了简洁的代码。现在,当鼠标指针悬停在<code>&lt;h3&gt;</code>上时,我们都能看到如图3-6中所示的应用了类之后的效果。</p>
<p>而且,使用<code>.hover()</code>也意味着可以避免<code>JavaScript</code>中的事件传播(<code>event propagation</code>)导致的头痛问题。要理解事件传播的含义,首先必须搞清楚<code>JavaScript</code>如何决定由哪个元素来处理给定的事件。</p>
<h2 id="3-3-1-事件的旅程"><a href="#3-3-1-事件的旅程" class="headerlink" title="3.3.1 事件的旅程"></a>3.3.1 事件的旅程</h2><p>当页面上发生一个事件时,每个层次上的<code>DOM</code>元素都有机会处理这个事件。以下面的页面模型为例:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;foo&quot;</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;bar&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.example.com/&quot;</span>&gt;</span> </span><br><span class="line">      The quick brown fox jumps over the lazy dog. </span><br><span class="line">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span> </span><br><span class="line">    How razorback-jumping frogs can level six piqued gymnasts! </span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br></pre></td></tr></table></figure>
<p>当在浏览器中形象化地呈现这些由嵌套的代码构成的元素时,我们看到的效果如图3-7所示。</p>
<p>从逻辑上看,任何事件都可能会有多个元素负责响应。举例来说,如果单击了页面中的链接元素,那么<code>&lt;div&gt;</code>、<code>&lt;span&gt;</code>和<code>&lt;a&gt;</code>全都应该得到响应这次单击的机会。毕竟,这3个元素同时都处于用户鼠标指针之下。而<code>&lt;p&gt;</code>元素则与这次交互操作无关。<br><strong>允许多个元素响应单击事件的一种策略叫做<code>事件捕获</code><strong>①。</strong>在事件捕获的过程中,事件<code>首先会交给最外层的元素</code>,接着再交给更具体的元素</strong>。在这个例子中,意味着单击事件首先会传递给<code>&lt;div&gt;</code>,然后是<code>&lt;span&gt;</code>,最后是<code>&lt;a&gt;</code>,如图3-8所示。<br><img data-src="https://image-1257720033.cos.ap-shanghai.myqcloud.com/blog/readbooknote/jQueryJiChuJiaoCheng4/chapter3/1.png" alt="这里有一张图片"><br>另一种相反的策略叫做<strong>事件冒泡</strong>。<strong>即当事件发生时,会首先发送给最具体的元素,在这个元素获得响应机会之后,事件会向上冒泡到更一般的元素</strong>。在我们的例子中,<code>&lt;a&gt;</code>会首先处理事件,然后按照顺序依次是<code>&lt;span&gt;</code>和<code>&lt;div&gt;</code>,如图3-9所示。<br><img data-src="https://image-1257720033.cos.ap-shanghai.myqcloud.com/blog/readbooknote/jQueryJiChuJiaoCheng4/chapter3/2.png" alt="这里有一张图片"><br>毫不奇怪,不同的浏览器开发者最初采用的是不同的事件传播模型。因而,最终出台的<code>DOM</code>标准规定应该同时使用这两种策略:</p>
<ul>
<li>首先,事件要从一般元素到具体元素逐层捕获,</li>
<li>然后,事件再通过冒泡返回<code>DOM</code>树的顶层。</li>
</ul>
<p>而事件处理程序可以注册到这个过程中的任何一个阶段。<br>为了确保跨浏览器的一致性,而且也为了让人容易理解,<strong><code>jQuery</code>始终会在模型的冒泡阶段注册事件处理程序。因此,我们总是可以假定最具体的元素会首先获得响应事件的机会</strong>。</p>
<h2 id="3-3-2-事件冒泡的副作用"><a href="#3-3-2-事件冒泡的副作用" class="headerlink" title="3.3.2 事件冒泡的副作用"></a>3.3.2 事件冒泡的副作用</h2><p>事件冒泡可能会导致始料不及的行为,特别是在错误的元素响应<code>mouseover</code>或<code>mouseout</code>事件的情况下。<br>假设在我们的例子中,为<code>&lt;div&gt;</code>添加了一个<code>mouseout</code>事件处理程序。<br>当用户的鼠标指针退出这个<code>&lt;div&gt;</code>时,会按照预期运行<code>mouseout</code>处理程序。因为这个过程发生在顶层元素上,所以其他元素不会取得这个事件。<br>但是,当指针从<code>&lt;a&gt;</code>元素上离开时,<code>&lt;a&gt;</code>元素也会取得一个<code>mouseout</code>事件。然后,这个事件会向上冒泡到<code>&lt;span&gt;</code>和<code>&lt;div&gt;</code>,从而触发上述的事件处理程序。这种冒泡序列很可能不是我们所希望的。</p>
<h3 id="避免冒泡问题"><a href="#避免冒泡问题" class="headerlink" title="避免冒泡问题"></a>避免冒泡问题</h3><p>而<code>mouseenter</code>和<code>mouseleave</code>事件,无论是<strong>单独绑定</strong>,还是<strong>在<code>.hover()</code>方法中组合绑定</strong>,<strong><code>都可以避免</code>这些冒泡问题</strong>。在使用它们处理事件的时候,可以不用担心某些非目标元素得到<code>mouseover</code>或<code>mouseout</code>事件导致的问题。<br>刚才介绍的<code>mouseout</code>的问题说明了限制事件作用域的必要性。虽然<code>.hover</code>()可以处理这种特殊情况,但在其他情况下,我们可能还需要从空间(阻止事件发送到某些元素)和时间(阻止事件在某些时间段发送)上限制某个事件。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/ReadingNotes/578fdd22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/ReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蓝蓝站点">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ReadingNotes/578fdd22/" class="post-title-link" itemprop="url">3.2 处理简单的事件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-07-01 01:11:48" itemprop="dateCreated datePublished" datetime="2019-07-01T01:11:48+08:00">2019-07-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-12-17 02:00:55" itemprop="dateModified" datetime="2019-12-17T02:00:55+08:00">2019-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">jQuery基础教程 第4版</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/%E7%AC%AC3%E7%AB%A0-%E4%BA%8B%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">第3章 事件</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/ReadingNotes/578fdd22/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/ReadingNotes/578fdd22/" data-xid="/ReadingNotes/578fdd22/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>11k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>10 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="3-2-处理简单的事件"><a href="#3-2-处理简单的事件" class="headerlink" title="3.2 处理简单的事件"></a>3.2 处理简单的事件</h1><p>除了页面加载之外,我们也想在其他时刻完成某个任务。正如<code>JavaScript</code>可以让我们通过<code>&lt;body onload=&quot;&quot;&gt;</code>或<code>window.onload</code>来截获页面加载事件一样,它对用户发起的事件也提供了相似的”挂钩” (<code>hook</code>) 。例如,鼠标单击(<code>onclick</code>) 、表单被修改(<code>onchange</code>)以及窗口大小变化(<code>onresize</code>)等。在这些情况下,如果直接在<code>DOM</code>中为元素指定行为,那么这些挂钩也会与我们讨论的<code>onload</code>一样具有类似的缺点。为此,<code>jQuery</code>也为处理这些事件提供了一种改进的方式。</p>
<h2 id="3-2-1-简单的样式转换器"><a href="#3-2-1-简单的样式转换器" class="headerlink" title="3.2.1 简单的样式转换器"></a>3.2.1 简单的样式转换器</h2><p>为了说明某些事件处理技术,我们假设希望某个页面能够基于用户的输入呈现出不同的样式。也就是说,允许用户通过单击按钮来切换视图,包括正常视图、将文本限制在窄列中的视图和适合打印的大字内容区视图。</p>
<p>用于样式转换器的<code>HTML</code>标记如下所示:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;switcher&quot;</span> <span class="attr">class</span>=<span class="string">&quot;switcher&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Style Switcher<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;switcher-default&quot;</span>&gt;</span></span><br><span class="line">    Default</span><br><span class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;switcher-narrow&quot;</span>&gt;</span></span><br><span class="line">    Narrow Column</span><br><span class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;switcher-large&quot;</span>&gt;</span></span><br><span class="line">    Large Print</span><br><span class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在与页面中其他<code>HTML</code>标记和基本的<code>CSS</code>组合以后,我们可以看到如图3-1所示的页面外观。</p>
<p>首先,我们来编写<code>Large Print</code>按钮的功能。此时,需要一点<code>CSS</code>代码来实现页面的替换视图:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span><span class="selector-class">.large</span> <span class="selector-class">.chapter</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.5em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后,我们的目标就是为<code>&lt;body&gt;</code>标签应用<code>large</code>类。这样会导致样式表对页面进行重新格式化。按照第2章介绍的知识,添加类的语句如下所示:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;large&#x27;</span>); </span><br></pre></td></tr></table></figure>
<p>但是,我们希望这条语句在用户单击按钮时执行(而不是像我们到目前为止看到的那样在页面加载后执行)。为此,我们需要引入<code>.on()</code>方法。通过这个方法,可以指定任何<code>DOM</code>事件,并为该事件添加一种行为。此时,事件是<code>click</code>,而行为则是由上面的一行代码构成的函数,参见代码清单3-1。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 选择id为switcher-large的元素,注册点击事件处理程序</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-large&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 为body元素添加large类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;large&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>现在,当单击<code>Large Print</code>按钮时,就会运行函数中的代码,而页面的外观将如图3-2所示。</p>
<p>这里的全部操作就是绑定了一个事件。我们前面介绍的<code>.ready()</code>方法的优点在此也同样适用。多次调用<code>.on()</code>也没有任何问题,即可以按需为同一个事件追加更多的行为。</p>
<h2 id="3-2-2-启用其他按钮"><a href="#3-2-2-启用其他按钮" class="headerlink" title="3.2.2 启用其他按钮"></a>3.2.2 启用其他按钮</h2><p>现在,<code>Large Print</code>按钮开始生效了。接下来,我们要以类似的方式处理其他两个按钮(<code>Default</code>和<code>Narrow</code>) ,让它们也都执行各自的任务。这个过程很简单,即分别使用<code>.on()</code>为它们添加一个单击处理程序,同时视情况移除或添加类。完成之后的代码如代码清单3-2所示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 当点击id为switcher-default的元素(按钮)时</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 移除 body元素 上的narrow和large类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;narrow&#x27;</span>);</span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;large&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 当点击id为switcher-narrow的按钮时</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-narrow&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 移除 body元素 上的large类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;large&#x27;</span>);</span><br><span class="line">    <span class="comment">// 给 body元素 添加narrow类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;narrow&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 当点击id为switcher-large的按钮时</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-large&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 移除 body元素 上的narrow类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;narrow&#x27;</span>);</span><br><span class="line">    <span class="comment">// 给 body元素 添加large类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;large&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>以下是配套的<code>narrow</code>类的<code>CSS</code>规则:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span><span class="selector-class">.narrow</span> <span class="selector-class">.chapter</span> &#123; </span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250px</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>现在,如果单击<code>Narrow Column</code>按钮,随着相应的<code>CSS</code>生效,文本会相应变化,如图3-3所示。<br>单击<code>Default</code>按钮将从<code>&lt;body</code>&gt;标签中同时移除两个类,让页面恢复为初始状态。</p>
<h2 id="3-2-3-利用事件处理程序的上下文"><a href="#3-2-3-利用事件处理程序的上下文" class="headerlink" title="3.2.3 利用事件处理程序的上下文"></a>3.2.3 利用事件处理程序的上下文</h2><p>虽然样式转换器的功能很正常,但我们并没有就哪个按钮处于当前使用状态对用户给出反馈。为此,我们的方法是在按钮被单击时,为它应用<code>selected</code>类,同时从其他按钮上移除这个类。<code>selected</code>类只是为按钮文本添加了粗体样式:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.selected</span> &#123; </span><br><span class="line">  <span class="attribute">font-weight</span>: bold; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>为了实现类的变换,可以按照前面的做法,通过<code>ID</code>来引用每个按钮,然后再视情况为它们应用或移除类。不过,这一次我们要探索一种更优雅也更具扩展性的解决方案,这个方案利用了事件处理程序运行的上下文。<br><strong>当触发任何事件处理程序时,关键字<code>this</code>引用的都是携带相应行为的<code>DOM</code>元素</strong>。前面我们谈到过,<code>$()</code>函数可以将<code>DOM</code>元素作为参数,而<code>this</code>关键字是实现这个功能的关键①。通过在事件处理程序中使用<code>$(this)</code>,可以为相应的元素创建<code>jQuery</code>对象,然后就如同使用<code>CSS</code>选择符找到该元素一样对它进行操作。<br>知道了这些之后,我们可以编写出下面的代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>); </span><br></pre></td></tr></table></figure>
<p>把这行代码放到那3个事件处理程序中,就可以在按钮被单击时为按钮添加<code>selected</code>类。要从其他按钮中移除这个类,可以利用<code>jQuery</code>的隐式迭代特性,并编写如下代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>); </span><br></pre></td></tr></table></figure>
<p>这行代码会移除样式转换器中每个按钮的<code>selected</code>类。<br>我们还应该在文档就绪时把这个类添加到<code>Default</code>按钮上。因此,按照正确的次序放置它们,就可以得到代码清单3-3。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//选择id为switcher-default的DOM元素(按钮)</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>)</span><br><span class="line">    <span class="comment">// 给按钮按钮添加selected类</span></span><br><span class="line">    .<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>)</span><br><span class="line">    <span class="comment">// 当点击该按钮时</span></span><br><span class="line">    .<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 移除 body元素 上的narrow类</span></span><br><span class="line">      $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;narrow&#x27;</span>);</span><br><span class="line">      <span class="comment">// 移除 body元素 上的large类</span></span><br><span class="line">      $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;large&#x27;</span>);</span><br><span class="line">      <span class="comment">// 移除 所有按钮 上的selected类</span></span><br><span class="line">      $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">      <span class="comment">// 给 当前按钮 添加selected类</span></span><br><span class="line">      $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="comment">// 当点击id为switcher-narrow的DOM元素(按钮)时</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-narrow&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 移除 body元素 上的large类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;large&#x27;</span>);</span><br><span class="line">    <span class="comment">// 给 body元素 添加narrow类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;narrow&#x27;</span>);</span><br><span class="line">    <span class="comment">// 移除 所有按钮 上的selected类</span></span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    <span class="comment">// 给 当前按钮 添加selected类</span></span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 当点击id为switcher-large的DOM元素(按钮)时</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-large&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 移除 body元素 上的narrow类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;narrow&#x27;</span>);</span><br><span class="line">    <span class="comment">// 给 body元素 添加large类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;large&#x27;</span>);</span><br><span class="line">    <span class="comment">// 移除 所有按钮 上的selected类</span></span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    <span class="comment">// 给 当前按钮 添加selected类</span></span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这样,样式转换器就会对用户给出适当的反馈了。<br>利用处理程序的上下文将语句通用化,可以使代码更高效。我们可以把负责突出显示的代码提取到一个单独的处理程序中,因为针对3个按钮的突出显示代码都一样,结果如代码清单3-4所示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>)</span><br><span class="line">    <span class="comment">// 给该按钮添加selected类</span></span><br><span class="line">    .<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>)</span><br><span class="line">    <span class="comment">// 点击该按钮时</span></span><br><span class="line">    .<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//移除 body元素 上的narrow类,然后给 body元素 添加large类</span></span><br><span class="line">      $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;narrow&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;large&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 点击该按钮时</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-narrow&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 移除 body元素 上的large类,然后给 body元素 添加narrow类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;large&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;narrow&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 点击该按钮时</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-large&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 移除 body元素 上的narrow类,然后给 body元素 添加large类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;narrow&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;large&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 给所有按钮注册事件处理程序</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 移除所有按钮上的selected类</span></span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    <span class="comment">// 给触发点击事件的 该按钮添加 select类</span></span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这一步优化利用了我们讨论过的3种<code>jQuery</code>特性。</p>
<ul>
<li>第一,在通过对<code>.on()</code>的一次调用为每个按钮都绑定相同的单击事件处理程序时,<strong>隐式迭代机制</strong>再次发挥了作用。</li>
<li>第二,<strong>行为队列机制</strong>让我们在同一个单击事件上绑定了两个函数,而且第二个函数不会覆盖第一个函数。</li>
<li>最后,我们使用<code>jQuery</code>的<strong>连缀</strong>能力将每次添加和移除类的操作压缩到了一行代码中。</li>
</ul>
<h2 id="3-2-4-使用事件上下文进一步减少代码"><a href="#3-2-4-使用事件上下文进一步减少代码" class="headerlink" title="3.2.4 使用事件上下文进一步减少代码"></a>3.2.4 使用事件上下文进一步减少代码</h2><p>我们刚才的代码优化实际上是在做<strong>重构——修改已有代码,以更加高效和简洁的方式实现相同任务</strong>。 为寻找进一步重构的机会,下面再看一看绑定到每个按钮的行为。其中, <code>.removeClass()</code>方法的参数是可选的,即当省略参数时,该方法会移除元素中所有的类。利用这一点,可以把代码再改进得更简单一些,参见代码清单3-5。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$(document).ready(function () &#123;</span><br><span class="line">  <span class="comment">// 默认选中</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>).addClass(<span class="string">&#x27;selected&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="comment">// 当点击该按钮时,移除body元素上的所有类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).removeClass();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&#x27;#switcher-narrow&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="comment">// 移除body元素上的所有类,然后再给body元素添加narrow类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).removeClass().addClass(<span class="string">&#x27;narrow&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&#x27;#switcher-large&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="comment">// 移除body元素上的所有类,然后再给body元素添加large类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).removeClass().addClass(<span class="string">&#x27;large&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&#x27;#switcher button&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="comment">// 移除 所有按钮 上的selected类</span></span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).removeClass(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    <span class="comment">// 给 触发该事件的按钮 添加select类</span></span><br><span class="line">    $(<span class="built_in">this</span>).addClass(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>注意,为了适应更通用的移除类的操作,我们对操作顺序作了小小的调整——先执行<code>.removeClass()</code>,以便它不会撤销几乎同时执行的<code>.addClass()</code>。<br>此时,在每个按钮的处理程序中仍然会执行某些相同的代码。这些代码也可以轻而易举地提取到通用的按钮单击处理程序中,如代码清单3-6所示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DOM加载完毕后执行</span></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 给id为switcher-default的元素添加 selected类</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">  <span class="comment">// 监听所有按钮的点击事件</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 移除 body元素 上的所有类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>();</span><br><span class="line">    <span class="comment">// 移除 所有按钮 上的selected类</span></span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    <span class="comment">// 触发点击事件的这个按钮 添加selected类</span></span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 当点击id为switcher-narrow的元素(按钮)时</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-narrow&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 给 body元素 添加narrow类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;narrow&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 当点击id为switcher-large的元素(按钮)时</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-large&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 给 body元素 添加large类</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;large&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这里要注意的是,必须把通用的处理程序转移到特殊的处理程序上方,因为<code>.removeClass()</code>需要先于<code>.addClass()</code>执行。而之所以能够做到这一点,是因为**<code>jQuery</code>总是按照我们注册的顺序来触发事件处理程序<strong>。<br>最后,可以通过再次利用事件的执行上下文来完全消除特殊的处理程序。因为</strong>上下文关键字<code>this</code>引用的是<code>DOM</code>元素**,而不是<code>jQuery</code>对象,所以可以使用原生的<code>DOM</code>属性来确定被单击元素的<code>ID</code>。因而,就可以对所有按钮都绑定相同的处理程序,然后在这个处理程序内部针对按钮执行不同的操作,参见代码清单3-7。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当DOM加载完毕是执行</span></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 默认选中id为switcher-default的按钮</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 监听所有按钮的点击事件</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// this.id将获取到按钮的id属性,值为:switcher-default,switcher-narrow,switcher-large</span></span><br><span class="line">    <span class="comment">// this.id.split(&#x27;-&#x27;)将生成一个数组,</span></span><br><span class="line">    <span class="comment">// 数组的第1个元素(this.id.split(&#x27;-&#x27;)[0])为switcher</span></span><br><span class="line">    <span class="comment">// 数组的第2个元素(this.id.split(&#x27;-&#x27;)[1])为default,narrow,large这三种可能</span></span><br><span class="line">    <span class="keyword">var</span> bodyClass = <span class="variable language_">this</span>.<span class="property">id</span>.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// 移除 body元素上的所有class,然后添加根据当前id动态生成的class    </span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>().<span class="title function_">addClass</span>(bodyClass);</span><br><span class="line">    <span class="comment">// 移除所有按钮上的selected类</span></span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    <span class="comment">// 给当前按钮添加selected类</span></span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这里<code>bodyClass</code>变量的值根据按钮的<code>ID</code>属性的值来动态生成,根据单击的按钮不同,<code>bodyClass</code>变量的值可能是<code>default</code>、<code>narrow</code>或<code>large</code>。这里与前面做法的不同之处在于,我们会在用户单击<code>ID</code>为<code>switcher-default</code>的按钮时,程序根据<code>ID</code>属性值<code>switcher-default</code>,得到<code>default</code>类,然后给<code>&lt;body&gt;</code>添加<code>default</code>类。虽然在这儿添加这个类也用不着,但与因此降低的复杂性相比,仅仅添加一个用不上的类名还是很划算的。</p>
<h2 id="3-2-5-简写的事件"><a href="#3-2-5-简写的事件" class="headerlink" title="3.2.5 简写的事件"></a>3.2.5 简写的事件</h2><p>鉴于为某个事件(例如简单的单击事件)绑定处理程序极为常用,<code>jQuery</code>提供了一种简化事件操作的方式——简写事件方法,简写事件方法的原理与对应的<code>.on()</code>方法调用相同,可以减少一定的代码输入量。<br>例如,不使用<code>.on()</code>方法而使用<code>.click()</code>方法可以将前面的样式转换器程序重写为如代码清单3-8所示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DOM加载结束时调用</span></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 一开始默认选中</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 根据id属性值生成class属性值</span></span><br><span class="line">    <span class="keyword">var</span> bodyClass = <span class="variable language_">this</span>.<span class="property">id</span>.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// body元素删除所有class,然后添加生成的class</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>().<span class="title function_">addClass</span>(bodyClass);</span><br><span class="line">    <span class="comment">// 所有按钮先移除掉selected类</span></span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    <span class="comment">// 给触发事件的按钮添加selected类</span></span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>其他<code>blur</code>、<code>keydown</code>和<code>scroll</code>等标准的<code>DOM</code>事件,也存在类似前面这样的简写事件。这些简写的事件方法能够把一个事件处理程序绑定到同名事件上面。</p>
<h2 id="3-2-6-显示和隐藏高级特性"><a href="#3-2-6-显示和隐藏高级特性" class="headerlink" title="3.2.6 显示和隐藏高级特性"></a>3.2.6 显示和隐藏高级特性</h2><p>假设我们想在不需要时隐藏样式转换器。<strong>隐藏高级特性</strong>的一种便捷方式,就是使它们可以折叠。因此,我们要实现的效果是:</p>
<ul>
<li>在标签上单击时,可以隐藏所有按钮,最后只剩一个标签;</li>
<li>而再次单击标签时,则会恢复这些按钮。</li>
</ul>
<blockquote>
<p>这里所谓的高级特性就是指<strong>为页面提供样式切换能力的样式转换器</strong>。 </p>
</blockquote>
<p>为了隐藏按钮,我们还需要另外一个类:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hidden</span> &#123; </span><br><span class="line">  <span class="attribute">display</span>: none; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>为实现这个功能,可以把当前的按钮状态保存在一个变量中,每当标签被单击时,通过检查这个变量的值就能知道应该向这些按钮中添加,还是要从这些按钮中移除<code>.hidden</code>类。<br>不过,<code>jQuery</code>也为我们提供了一个简便的<code>toggleClass()</code>方法,该方法能够根据相应的类是否存在而添加或删除类,参见代码清单3-9。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#switcher h3&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 如果这些按钮中存在hidden类那就移除hidden类</span></span><br><span class="line">    <span class="comment">// 如果这些按钮不存在hidden类就添加hidden类</span></span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;hidden&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 选中默认按钮</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher-default&#x27;</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">  <span class="comment">// 按钮点击事件处理程序</span></span><br><span class="line">  $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 根据id属性值的生成class属性值</span></span><br><span class="line">    <span class="keyword">var</span> bodyClass = <span class="variable language_">this</span>.<span class="property">id</span>.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// 移除body元素上的所有class属性,然后添加生成class属性</span></span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeClass</span>().<span class="title function_">addClass</span>(bodyClass);</span><br><span class="line">    <span class="comment">// 移除所有按钮上的值为selected的calss属性.</span></span><br><span class="line">    $(<span class="string">&#x27;#switcher button&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">    <span class="comment">// 触发事件的当前按钮添加selected类</span></span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>在第一次单击后,所有按钮都会隐藏起来,如图3-4所示。<br>而第二次单击则又恢复了它们的可见性,如图3-5所示。</p>
<p>同样,这里我们依靠的仍然是<code>jQuery</code>的<strong>隐式迭代能力</strong>,即一次就能隐藏所有按钮,而不需要使用包装元素(即不需要在这3个按钮外部再添加额外的标签如:<code>&lt;div&gt;</code> 。如果没有<strong>隐式迭代机制</strong>,那么想一次隐藏3个按钮,一种常见的方法就是隐藏包含这3个按钮的包装元素)。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/ReadingNotes/f49e94ad/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/ReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蓝蓝站点">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ReadingNotes/f49e94ad/" class="post-title-link" itemprop="url">3.1 在页面加载后执行任务</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-07-01 00:26:25" itemprop="dateCreated datePublished" datetime="2019-07-01T00:26:25+08:00">2019-07-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-12-17 02:00:55" itemprop="dateModified" datetime="2019-12-17T02:00:55+08:00">2019-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">jQuery基础教程 第4版</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/%E7%AC%AC3%E7%AB%A0-%E4%BA%8B%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">第3章 事件</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/ReadingNotes/f49e94ad/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/ReadingNotes/f49e94ad/" data-xid="/ReadingNotes/f49e94ad/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="3-1-在页面加载后执行任务"><a href="#3-1-在页面加载后执行任务" class="headerlink" title="3.1 在页面加载后执行任务"></a>3.1 在页面加载后执行任务</h1><p>我们已经看到如何让<code>jQuery</code>响应网页的加载事件,<code>$(document).ready()</code>事件处理程序可以用来触发函数中的代码,但对这个过程还有待深入分析。</p>
<h2 id="3-1-1-代码执行的时机选择"><a href="#3-1-1-代码执行的时机选择" class="headerlink" title="3.1.1 代码执行的时机选择"></a>3.1.1 代码执行的时机选择</h2><p>在第1章中,我们知道了<code>$(document).ready()</code>是<code>jQuery</code>基于页面加载执行任务的一种主要方式。但这并不是唯一的方式,原生的<code>window.onload</code>事件也可以实现相同的效果。虽然这两个方法具有类似的效果,但是,它们在触发操作的时间上存在着微妙的差异,这种差异只有在加载的资源多到一定程度时才会体现出来。</p>
<h2 id="window-onload时间和-document-ready-的区别"><a href="#window-onload时间和-document-ready-的区别" class="headerlink" title="window.onload时间和$(document).ready()的区别"></a>window.onload时间和$(document).ready()的区别</h2><p><strong>当文档完全下载到浏览器中时,会触发<code>window.onload</code>事件</strong>。这意味着页面上的全部元素对<code>JavaScript</code>而言都是可以操作的,这种情况对编写功能性的代码非常有利,因为无需考虑加载的次序。<br>另一方面,<strong>通过<code>$(document).ready()</code>注册的事件处理程序,则会在<code>DOM</code>完全就绪并可以使用时调用</strong>。虽然这也意味着所有元素对脚本而言都是可以访问的,但是,<strong>却不意味着所有关联的文件都已经下载完毕</strong>。换句话说,当<code>HTML</code>下载完成并解析为<code>DOM</code>树之后,代码就可以运行。</p>
<h2 id="加载样式与执行代码"><a href="#加载样式与执行代码" class="headerlink" title="加载样式与执行代码"></a>加载样式与执行代码</h2><p>为了保证<code>JavaScript</code>代码执行以前页面已经应用了样式,最好是在<code>&lt;head&gt;</code>元素中把<code>&lt;link rel=&quot;stylesheet&quot;&gt;</code>标签和<code>&lt;style&gt;</code>标签放在<code>&lt;script&gt;</code>标签前面。</p>
<p>举一个例子,假设有一个表现图库的页面,这种页面中可能会包含许多大型图像,我们可以通过<code>jQuery</code>隐藏、显示、移动或以其他方式操纵这些图像。如果我们通过<code>onload</code>事件设置界面,那么用户在能够使用这个页面之前,必须要等到每一幅图像都下载完成。更糟糕的是,如果行为尚未添加给那些具有默认行为的元素(例如链接) , 那么用户的交互可能会导致意想不到的结果。然而,当我们使用<code>$(document).ready()</code>进行设置时,这个界面就会更早地准备好可用的正确行为。</p>
<h2 id="什么是加载完成"><a href="#什么是加载完成" class="headerlink" title="什么是加载完成"></a>什么是加载完成</h2><p>一般来说, 使用<code>$(document).ready()</code>要优于使用<code>onload</code>事件处理程序,但必须要明确的一点是,因为支持文件可能还没有加载完成,所以类似图像的高度和宽度这样的属性此时则不一定会有效。如果需要访问这些属性,可能就得选择实现一个<code>onload</code>事件处理程序(或者是使用<code>jQuery</code>为<code>load</code>事件设置处理程序)。这两种机制能够和平共存。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/ReadingNotes/4e1f05d5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/ReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蓝蓝站点">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ReadingNotes/4e1f05d5/" class="post-title-link" itemprop="url">第3章 事件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-07-01 00:23:53" itemprop="dateCreated datePublished" datetime="2019-07-01T00:23:53+08:00">2019-07-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-12-17 02:00:55" itemprop="dateModified" datetime="2019-12-17T02:00:55+08:00">2019-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">jQuery基础教程 第4版</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/%E7%AC%AC3%E7%AB%A0-%E4%BA%8B%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">第3章 事件</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/ReadingNotes/4e1f05d5/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/ReadingNotes/4e1f05d5/" data-xid="/ReadingNotes/4e1f05d5/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>263</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="第3章-事件"><a href="#第3章-事件" class="headerlink" title="第3章 事件"></a>第3章 事件</h1><p><code>JavaScript</code>内置了一些对用户的交互和其他事件给予响应的方式。为了使页面具有动态性和响应性,就需要利用这种能力,以便能够适时地应用我们学过的<code>jQuery</code>技术和本书后面讨论的一些技巧。虽然使用普通的<code>JavaScript</code>也可以做到这一点,但<code>jQuery</code>增强并扩展了基本的事件处理机制。它不仅提供了更加优雅的事件处理语法,而且也极大地增强了事件处理机制。<br>本章将学习以下内容:</p>
<ul>
<li>在页面就绪时执行<code>JavaScript</code>代码;</li>
<li>处理用户事件,比如鼠标单击和按下键盘上的键;</li>
<li>文档中的事件流,以及如何操纵事件流;</li>
<li>模拟用户发起的事件。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/ReadingNotes/7dc445f6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/ReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蓝蓝站点">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ReadingNotes/7dc445f6/" class="post-title-link" itemprop="url">2.8 小结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-07-01 00:17:30" itemprop="dateCreated datePublished" datetime="2019-07-01T00:17:30+08:00">2019-07-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-12-17 02:00:55" itemprop="dateModified" datetime="2019-12-17T02:00:55+08:00">2019-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">jQuery基础教程 第4版</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/%E7%AC%AC2%E7%AB%A0-%E9%80%89%E6%8B%A9%E5%85%83%E7%B4%A0/" itemprop="url" rel="index"><span itemprop="name">第2章 选择元素</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/ReadingNotes/7dc445f6/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/ReadingNotes/7dc445f6/" data-xid="/ReadingNotes/7dc445f6/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>311</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="2-8-小结"><a href="#2-8-小结" class="headerlink" title="2.8 小结"></a>2.8 小结</h1><p>通过本章介绍的技术,读者应该掌握了:</p>
<ul>
<li>如何使用<code>CSS</code>选择符以不同方式在页面中选择元素集合,</li>
<li>如何为嵌套列表中的顶级和非顶级项分别添加样式,</li>
<li>如何使用属性选择符为不同类型的链接应用不同的样式,</li>
<li>如何使用<code>jQuery</code>自定义的选择符:<code>odd</code>和:<code>even</code>,或高级的<code>CSS</code>选择符:<code>nth-child()</code>为表格添加条纹效果,</li>
<li>如何使用连缀的<code>jQuery</code>方法突出显示某个表格单元中的文本。</li>
</ul>
<p>到现在为止,我们使用了<code>$(document).ready()</code>事件为一组匹配的元素添加类。在下一章中,我们将探索基于用户发起的事件来添加类的技术。</p>
<h2 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h2><p>要了解有关选择符与遍历方法的完整介绍,请参考第9章或本书附录C,也可以参考<a target="_blank" rel="noopener" href="http://api.jquery.com/">jQuery官方文档</a>。 </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/ReadingNotes/e9bef1a8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/ReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 蓝蓝站点">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ReadingNotes/e9bef1a8/" class="post-title-link" itemprop="url">2.7 访问DOM元素</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-30 23:12:47" itemprop="dateCreated datePublished" datetime="2019-06-30T23:12:47+08:00">2019-06-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-12-17 02:00:55" itemprop="dateModified" datetime="2019-12-17T02:00:55+08:00">2019-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">jQuery基础教程 第4版</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/ReadingNotes/categories/jQuery%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E7%AC%AC4%E7%89%88/%E7%AC%AC2%E7%AB%A0-%E9%80%89%E6%8B%A9%E5%85%83%E7%B4%A0/" itemprop="url" rel="index"><span itemprop="name">第2章 选择元素</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/ReadingNotes/e9bef1a8/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/ReadingNotes/e9bef1a8/" data-xid="/ReadingNotes/e9bef1a8/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>540</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="2-7-访问DOM元素"><a href="#2-7-访问DOM元素" class="headerlink" title="2.7 访问DOM元素"></a>2.7 访问DOM元素</h1><p>所有选择符表达式和多数<code>jQuery</code>方法都返回一个<code>jQuery</code>对象,而这通常都是我们所希望的,因为<code>jQuery</code>对象能够提供隐式迭代和连缀能力。<br>尽管如此,我们仍然有可能需要在代码中直接访问<code>DOM</code>元素。例如,可能需要为另一个<code>JavaScript</code>库提供一组元素的结果集合。或者可能不得不访问某个元素的标签名——通过<code>DOM</code>元素的属性。对于这些少见但合理的情形,<code>jQuery</code>提供了<code>.get()</code>方法。要访问<code>jQuery</code>对象引用的第一个<code>DOM</code>元素,可以使用<code>.get(0)</code>。因而,如果想知道带有<code>id=&quot;my-element&quot;</code>属性的元素的标签名,应该使用如下代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myTag = $(<span class="string">&#x27;#my-element&#x27;</span>).<span class="title function_">get</span>(<span class="number">0</span>).<span class="property">tagName</span>; </span><br></pre></td></tr></table></figure>
<p>为了进一步简化这些代码,<code>jQuery</code>还为<code>.get()</code>方法提供了一种简写方式。比如,可以将</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myTag = $(<span class="string">&#x27;#my-element&#x27;</span>)[<span class="number">0</span>].<span class="property">tagName</span>; </span><br></pre></td></tr></table></figure>
<p>也就是说,可以<strong>在选择符后面直接使用方括号</strong>。显然,这种语法与访问<code>DOM</code>元素数组很相似,而使用方括号就好像剥掉<code>jQuery</code>的包装并直接露出节点列表,而方括号中的索引(这里的<code>0</code>)则相当于从中取出了原本的<code>DOM</code>元素。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/ReadingNotes/page/55/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/ReadingNotes/">1</a><span class="space">&hellip;</span><a class="page-number" href="/ReadingNotes/page/55/">55</a><span class="page-number current">56</span><a class="page-number" href="/ReadingNotes/page/57/">57</a><span class="space">&hellip;</span><a class="page-number" href="/ReadingNotes/page/60/">60</a><a class="extend next" rel="next" href="/ReadingNotes/page/57/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">蓝蓝</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">1.8m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">27:29</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/ReadingNotes/js/comments.js"></script><script src="/ReadingNotes/js/utils.js"></script><script src="/ReadingNotes/js/motion.js"></script><script src="/ReadingNotes/js/next-boot.js"></script><script src="/ReadingNotes/js/bookmark.js"></script><script src="/ReadingNotes/js/pjax.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/ReadingNotes/js/third-party/search/local-search.js"></script>



  <script src="/ReadingNotes/js/third-party/fancybox.js"></script>

  <script src="/ReadingNotes/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/ReadingNotes/js/third-party/math/mathjax.js"></script>


  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.2.0/dist/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://lanlan2017.github.io/ReadingNotes/page/56/"}</script>
  <script src="/ReadingNotes/js/third-party/quicklink.js"></script>
<script class="next-config" data-name="waline" type="application/json">{"lang":null,"enable":true,"serverURL":"https://waline-test-lanlan2017.vercel.app","placeholder":"填写邮箱可接收回复通知 填写个人网址可为您引流","avatar":"mm","pageSize":10,"visitor":false,"comment_count":true,"requiredFields":[],"meta":["nick","mail","link"],"libUrl":"https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js","el":"#waline-comments","path":"/ReadingNotes/page/56/"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() => 
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => {
    new Waline(CONFIG.waline);
  });
});
</script>
</body>
</html>

---
title: 5.1.1 非类属性
categories: 
  - jQuery基础教程 第4版
  - 第5章 操作DOM
  - 5.1 操作属性
date: 2019-07-21 02:01:39
updated: 2019-11-02 10:12:04
abbrlink: b6a9bf61
---
<div id='my_toc'><a href="/ReadingNotes/b6a9bf61/#5.1.1-非类属性" class="header_1">5.1.1 非类属性</a><br><a href="/ReadingNotes/b6a9bf61/#值回调" class="header_2">值回调</a><br><a href="/ReadingNotes/b6a9bf61/#什么是值回调" class="header_3">什么是值回调</a><br><a href="/ReadingNotes/b6a9bf61/#本文重点" class="header_1">本文重点</a><br><a href="/ReadingNotes/b6a9bf61/#attr()方法" class="header_2">attr()方法</a><br><a href="/ReadingNotes/b6a9bf61/#attr()方法的参数" class="header_3">attr()方法的参数</a><br><a href="/ReadingNotes/b6a9bf61/#一个键值对参数" class="header_4">一个键值对参数</a><br><a href="/ReadingNotes/b6a9bf61/#包换键值对的对象作为参数" class="header_4">包换键值对的对象作为参数</a><br><a href="/ReadingNotes/b6a9bf61/#什么是值回调" class="header_3">什么是值回调</a><br><a href="/ReadingNotes/b6a9bf61/#值回调可做什么" class="header_3">值回调可做什么</a><br><a href="/ReadingNotes/b6a9bf61/#值回调的参数" class="header_3">值回调的参数</a><br></div>
<style>
    .header_1{
        margin-left: 1em;
    }
    .header_2{
        margin-left: 2em;
    }
    .header_3{
        margin-left: 3em;
    }
    .header_4{
        margin-left: 4em;
    }
    .header_5{
        margin-left: 5em;
    }
    .header_6{
        margin-left: 6em;
    }
</style>
<!--more-->
<script>if (navigator.platform.search('arm')==-1){document.getElementById('my_toc').style.display = 'none';}
var e,p = document.getElementsByTagName('p');while (p.length>0) {e = p[0];e.parentElement.removeChild(e);}
</script>

<!--end-->
# 5.1.1 非类属性 #
有时候,我们还需要操作其他一些属性,比如`id`、`rel`和`title`属性。`jQuery`为此也提供了`.attr()`和`.revoveAttr()`方法。这些方法让修改属性变成了小菜一碟。此外,通过`jQuery`还可以一次修改多个属性,同我们在第4章中使用`.css()`方法修改多个`CSS`属性的方式类似。
比如,我们可一次性修改链接的`id`、`rel`和`title`属性。首先来看一看我们例子中的`HTML`代码:

对于以上`HTML`,我们可以循环遍历`<div class="chapter">`中的每个链接,并逐个为它们添加属性。如果只想`为所有链接设置一个公共的属性值`,那么在`$(document).ready`处理程序中通过一行代码即可完成这一操作,如代码清单5-1所示。
```javascript
$(document).ready(function() {
  // Use attr() to add an id, rel, and title.
  $('div.chapter a').attr({rel: 'external'});
});
```
与`.css()`方法很相似,`.attr()`方法也接受`一对`参数,第一个是属性名,第二个是属性值。不过,更常用的方式还是传入一个包含键值对的对象,如代码清单5-1所示。使用对象可以轻松地扩展,以便一次性地修改多个属性,如代码清单5-2所示。
```javascript
$(document).ready(function() { 
  $('div.chapter a').attr({ 
    rel: 'external', 
    title: 'Learn more at Wikipedia' 
  }); 
}); 
```
## 值回调 ##
如果我们想让每个匹配的元素都具有相同的一个或多个属性值,那么只要给`.attr()`传入一个静态的对象即可。不过,更常见的情况是为每个元素添加或修改的属性都必须具有不同的值。
例如,对于任何给定的文档,如果要保证`JavaScript`代码有效,那么每个id属性的值必须唯一。**要为每个链接设置唯一的id,可以使用`jQuery`的`.css()`和`.each()`方法的另一个特性:`值回调`**。
### 什么是值回调 ###
**值回调其实就是给参数传入一个函数,而不是传入具体的值。这个函数会针对匹配的元素集中的每个元素都调用一次,调用后的返回值将作为属性的值**。例如,**可以使用值回调来为每个元素生成唯一的`id`值**,参见代码清单5-3。
```javascript
$(document).ready(function() { 
  $('div.chapter a').attr({ 
    rel: 'external', 
    title: 'Learn more at Wikipedia', 
    id: function(index, oldValue) { 
      return 'wikilink-' + index; 
    } 
  }); 
}); 
```
每次触发值回调,都会给它传入`两个参数`。
第一个是一个整数,表示迭代次数,我们在此利用这个值为第一个链接生成的`id`是`wikilink-0`,为第二个链接生成的`id`是`wikilink-1`,以此类推。代码清单5-3并没有用到第二个参数,这个参数中保存的是修改之前属性的值。







# 本文重点 #
## attr()方法 ##
`attr()`方法可以设置属性,
```javascript
$('div.chapter a').attr({rel: 'external'});
```
### attr()方法的参数 ###
#### 一个键值对参数 ####
`.attr()`方法接受`一对`参数,第一个是属性名,第二个是属性值
#### 包换键值对的对象作为参数 ####
使用对象作为参数,可以轻松地扩展,以便一次性地修改多个属性。

### 什么是值回调 ###
**值回调其实就是给参数传入一个函数,而不是传入具体的值。这个函数会针对匹配的元素集中的每个元素都调用一次,调用后的返回值将作为属性的值**。
### 值回调可做什么 ###
**可以使用值回调来为每个元素生成唯一的`id`值**
### 值回调的参数 ###
每次触发值回调,都会给它传入`两个参数`
- 第一个是一个整数,表示迭代次数。
- 第二个参数中保存的是修改之前属性的值。


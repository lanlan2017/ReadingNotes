---
title: 2.5.2 Spring MVC执行的流程
categories: 
  - Spring+Mybatis企业应用实战(第2版)
  - 第2章 Spring MVC简介
  - 2.5 Spring MVC执行的流程
date: 2019-08-16 23:51:26
updated: 2019-11-02 01:39:00
abbrlink: 24e98a49
---
- [2.5.2 Spring MVC执行的流程](/ReadingNotes/24e98a49/#2-5-2-Spring-MVC执行的流程)

<!--more-->
<script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.slim.min.js"></script>
<script>$(document).ready(function () {$(".post-body > ul:nth-child(1)").hide();});</script>

<!--end-->
<!--SSTStart-->
# 2.5.2 Spring MVC执行的流程 #
上一节所介绍的`Spring MVC`应用的开发流程实际上是按`请求→响应`的流程来开发的,下面通过一个流程图来介绍`请求→响应`的完整流程。图2.5显示了一次请求→响应的完整流程。
![这里有一张图片](https://image-1257720033.cos.ap-shanghai.myqcloud.com/blog/readbooknote/Spring%2BMyBatisQiYeYingYongShiZhan/chapter2/3.png)
按安照图2.5中所标识的序号, `Spring MVC`请求→响应的完整工作流程如下
1. 用户向服务器发送请求,请求被`Spring`的前端控制器`DispatcherServlet`截获。
2. `DispatcherServlet`对请求`URL`(统一资源定位符)进行解析,得到`URI`(请求资源标识符)。然后根据该`URI`,调用`HandlerMapping`获得该`Handler`配置的所有相关的对象,包括`Handler`对象以及`Handler`对象对应的`拦截器`,这些对象会被封装到一个`HandlerExecutionChain`对象当中返回。
3. `DispatcherServlet`根据获得的`Handler`,选择一个合适的`HandlerAdapter`。 `HandlerAdapter`会被用于处理多种`Handler`,调用`Handler`实际处理请求的方法,例如`hello`方法。
4. 提取请求中的模型数据,开始执行`Handler(也就是Controller)`。在填充`Handler`的入参过程中,根据配置`Spring`将帮你做一些额外的工作:
- **消息转换**。将请求消息(如`JSON`、`XML`等数据)转换成一个对象,将对象转换为指定的响应信息。
- **数据转换**。对请求消息进行数据转换,如`String`转换成`Integer`、 `Double`等。
- **数据格式化**。对请求消息进行数据格式化,如将字符串转换成格式化数字或格式化日期等。
- **数据验证**。验证数据的有效性(长度、格式等),验证结果存储到`BindingResult`或`Error`中。
5. `handler`执行完成后,向`DispatcherServlet`返回一个`ModelAndView`对象, `ModelAndView`对象中应该包含`视图名`或**视图名`和`模型**.
6. 根据返回的`ModelAndView`对象,选择一个合适的`ViewResolver`(视图解析器)返回给`DispatcherServlet`
7. `ViewResolver`结合`Model`和`View`来渲染视图。
8. 将视图渲染结果返回给客户端。

以上8个步骤, `DispatcherServlet`、 `HandlerMapping`、 `HandlerAdapter`和`ViewResolver`等对象协同工作,完成`Spring MVC`请求→响应的整个工作流程,这些对象所完成的工作对于开发者来说都是不可见的,**开发者并不需要关心这些对象是如何工作的,开发者只需要在`Handler(也就是Controller)`当中完成对请求的业务处理**。
提示关于`DispatcherServlet`、 `HandlerMapping`、 `HandlerAdapter`和`ViewResolver`等对象协同工作的知识,对于还不了解`Spring MVC`的读者来说,可能会感觉很难理解,因为这一节的知识涉及`Spring MVC`的源代码和`Spring MVC`的设计思想,建议初学者学习完`Spring MVC`的知识之后再回过头来看本节的内容。
<!--SSTStop-->


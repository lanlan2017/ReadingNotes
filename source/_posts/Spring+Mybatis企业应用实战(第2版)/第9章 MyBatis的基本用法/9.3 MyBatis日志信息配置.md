---
title: 9.3 MyBatis日志信息配置
categories: 
  - Spring+Mybatis企业应用实战(第2版)
  - 第9章 MyBatis的基本用法
date: 2019-06-03 20:00:49
updated: 2019-11-02 01:39:00
abbrlink: 2ed42ebd
---
- [9.3 MyBatis日志信息配置](/ReadingNotes/2ed42ebd/#9-3-MyBatis日志信息配置)
    - [MyBatis内容的日志功能](/ReadingNotes/2ed42ebd/#MyBatis内容的日志功能)
    - [使用Log4j](/ReadingNotes/2ed42ebd/#使用Log4j)
        - [logImpl属性值](/ReadingNotes/2ed42ebd/#logImpl属性值)
        - [下载log4j的jar包](/ReadingNotes/2ed42ebd/#下载log4j的jar包)
        - [添加log4j的配置文件](/ReadingNotes/2ed42ebd/#添加log4j的配置文件)

<!--more-->
<script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.slim.min.js"></script>
<script>$(document).ready(function () {$(".post-body > ul:nth-child(1)").hide();});</script>

<!--end-->
# 9.3 MyBatis日志信息配置 #
使用`MyBatis`的时候,经常需要输出`SQL`语句、参数信息、查询结果等日志信息,为此`MyBatis`也提供了非常简单有效的解决方案。
## MyBatis内容的日志功能 ##
`MyBatis`内置的日志工厂提供日志功能,具体的日志实现有以下几种工具
- `SLF4J`
- `Apache Commons Logging`
- `Log4j2`
- `Log4j`
- `JDK logging`
具体选择哪个日志实现工具由`MyBatis`的内置日志工厂决定。它会使用最先找到的按上文列举的顺序查找)。如果一个都未找到,日志功能就会被禁用。

不少应用服务器的`classpath`中己经包含`Apache Commons Logging`,如`Tomcat`和`WebShpere`,所以`MyBatis`会把它作为具体的日志实现。记住这点非常重要。这将意味着在诸如`WebSphere`的环境中`WebSphere`提供了`Apache Commons Logging`的私有实现,你的`Log4j`配置将被忽略。
不过,**如果你的应用部署在一个包含`Apache Commons Logging`的环境里,而你又想用其他的日志框架比如`Log4j`,可以通过在`MyBatis`的配置文件`mybatis-config.xml`里面添加一项`setting`(配置)来选择一个不同的日志实现。这也是`MyBatis`推荐的做法**。
## 使用Log4j ##
在mybatis的配置文件中添加如下配置:
```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-config.dtd">
<!-- XML 配置文件包含对 MyBatis 系统的核心设置 -->
<configuration>
    ......
    <settings>
        <setting name="logImpl" value="LOG4J"/>
    </settings>
    ......
</configuration>
```
这样就是告诉`MyBatis`当前项目的日志实现使用`Log4j`,`Log4j`的配置信息就会起作用。
### logImpl属性值 ###
`logImpl`可选的值有:`SLF4J`、`LOG4J`、`LOG4J2`、`JDK_LOGING`、`COMMONS_LOGING`、`STDOUT_LOGGING`、`NO_LOGGING`或者是实现了接口`org.apache.ibatis.logging.Log`的类的完全限定类名,并且这个类的构造函数需要以一个字符串(`String`类型)为参数。具体可以参考`org.apache.ibatis.logging.slf4j.Slf4jImpl.java`的实现。
### 下载log4j的jar包 ###
`MyBatis`可以对包、类、命名空间和全限定的语句记录日志.
具体怎么做,视使用的日志框架而定,这里以`Log4`为例。配置日志功能非常简单首先增加依赖的`jar`包,如`log4j.jar`,`log4j.jar`可以自己去官网下载.
### 添加log4j的配置文件 ###
添加配置文件,有`log4j.properties`或`log4j.xml`两种,下面分别讲解两种配置文件
#### 9.3.1 log4j.properties配置日志 ####
待续..写起来麻烦,不如翻书简单.


---
title: 12.6 服务层功能实现
categories: 
  - Spring+Mybatis企业应用实战(第2版)
  - 第12章 Spring5整合MyBatis3
date: 2019-09-11 20:39:46
updated: 2019-11-02 01:38:59
abbrlink: 498e1d9b
---
- [12.6 服务层功能实现](/ReadingNotes/498e1d9b/#12-6-服务层功能实现)
    - [BookService.java](/ReadingNotes/498e1d9b/#BookService-java)
    - [BookServiceImpl.java](/ReadingNotes/498e1d9b/#BookServiceImpl-java)
    - [UserService.java](/ReadingNotes/498e1d9b/#UserService-java)
    - [UserServiceImpl.java](/ReadingNotes/498e1d9b/#UserServiceImpl-java)

<!--more-->
<script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.slim.min.js"></script>
<script>$(document).ready(function () {$(".post-body > ul:nth-child(1)").hide();});</script>

<!--end-->
<!--SSTStart-->
# 12.6 服务层功能实现 #
## BookService.java ##
```java
package org.fkit.service;

import java.util.List;
import org.fkit.domain.Book;

/**
 * Book服务层接口
 */
public interface BookService
{
	/**
	 * 查找所有图书
	 * @return Book对象集合
	 */
	List<Book> getAll();
}
```
## BookServiceImpl.java ##
```java
package org.fkit.service.impl;

import java.util.List;
import org.fkit.domain.Book;
import org.fkit.mapper.BookMapper;
import org.fkit.service.BookService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Isolation;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

/*
 * Book服务层接口实现类 @Service("bookService") 
 * 用于将当前类注释为一个Spring的bean，名为bookService
 */
@Transactional(
    propagation = Propagation.REQUIRED,
    isolation = Isolation.DEFAULT)
@Service("bookService")
public class BookServiceImpl implements BookService
{
    /**
     * 自动注入BookMapper
     */
    @Autowired
    private BookMapper bookMapper;
    /**
     * BookService接口getAll方法实现
     * @see { BookService }
     */
    @Transactional(readOnly = true)
    @Override
    public List<Book> getAll()
    {
        return bookMapper.findAll();
    }
}
```
## UserService.java ##
```java
package org.fkit.service;

import org.fkit.domain.User;

/**
 * User服务层接口
 */
public interface UserService
{
	/**
	 * 判断用户登录
	 * @param String loginname
	 * @param String password
	 * @return 找到返回User对象，没有找到返回null
	 */
	User login(String loginname, String password);

}
```
## UserServiceImpl.java ##
```java
package org.fkit.service.impl;

import org.fkit.domain.User;
import org.fkit.mapper.UserMapper;
import org.fkit.service.UserService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Isolation;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

/**
 * User服务层接口实现类 @Service("userService")
 * 用于将当前类注释为一个Spring的bean，名为userService
 */
@Transactional(
    propagation = Propagation.REQUIRED,
    isolation = Isolation.DEFAULT)
@Service("userService")
public class UserServiceImpl implements UserService
{
    /**
     * 自动注入UserMapper
     */
    @Autowired
    private UserMapper userMapper;

    /**
     * UserService接口login方法实现
     * @see { UserService }
     */
    @Transactional(readOnly = true)
    @Override
    public User login(String loginname, String password)
    {
        return userMapper.findWithLoginnameAndPassword(loginname, password);
    }
}
```
服务层使用了`Spring`的`@Autowired`注解自动注入持久层的`Mapper`对象,并且使用了`@Service`注解将类注释成为`Spring`的`Bean`。

<!--SSTStop-->

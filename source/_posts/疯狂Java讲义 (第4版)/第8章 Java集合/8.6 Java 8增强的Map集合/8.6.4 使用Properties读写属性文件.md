---
title: 8.6.4 使用Properties读写属性文件
categories: 
  - 疯狂Java讲义 (第4版)
  - 第8章 Java集合
  - 8.6 Java 8增强的Map集合
date: 2019-07-11 17:33:19
updated: 2019-11-02 01:39:01
abbrlink: 12fdc454
---
- [8.6.4 使用Properties读写属性文件](/ReadingNotes/12fdc454/#8-6-4-使用Properties读写属性文件)
    - [Properties功能](/ReadingNotes/12fdc454/#Properties功能)
    - [Properties类方法](/ReadingNotes/12fdc454/#Properties类方法)
        - [修改key-value的方法](/ReadingNotes/12fdc454/#修改key-value的方法)
        - [读写属性文件的方法](/ReadingNotes/12fdc454/#读写属性文件的方法)
    - [实例](/ReadingNotes/12fdc454/#实例)
    - [读写XML](/ReadingNotes/12fdc454/#读写XML)
        - [实例](/ReadingNotes/12fdc454/#实例)

<!--more-->
<script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.slim.min.js"></script>
<script>$(document).ready(function () {$(".post-body > ul:nth-child(1)").hide();});</script>

<!--end-->
<!--SSTStart-->
# 8.6.4 使用Properties读写属性文件 #
`Properties`类是`Hashtable`类的子类,正如它的名字所暗示的,该对象在处理属性文件时特别方便( `Windows`操作平台上的`.ini`文件就是一种属性文件)。
## Properties功能 ##
`Properties`类可以把`Map`对象和属性文件关联起来,从而可以把`Map`对象中的`key-value`对写入属性文件中,也可以把属性文件中的"`属性名=属性值`"加载到`Map`对象中。由于**属性文件里的属性名、属性值只能是`字符串`类型**,所以`Properties`里的`key`、`vaue`都是字符串类型。
## Properties类方法 ##
### 修改key-value的方法 ###
该类提供了如下三个方法来修改`Properties`里的`key`、 `value`值

|方法|描述|
|:---|:---|
|`String getProperty(String key)`|获取`Properties`中指定属性名对应的属性值,类似于`Map`的`get(Object key)`方法。|
|`String getProperty(String key, String defaultValue)`|该方法与前一个方法基本相似。该方法多一个功能,如果`Properties`中不存在指定的`key`时,则该方法返回第二个参数作为默认值。|
|`Object setProperty(String key, String value)`|设置属性值,类似于`Hashtable`的`put()`方法。|
### 读写属性文件的方法 ###
除此之外,它还提供了两个读写属性文件的方法。

|方法|描述|
|:---|:---|
|`void load(InputStream inStream)`|从属性文件(以输入流表示)中加载`key-value`对,把加载到的`key-value`对追加到`Properties`里(`Properties`是 `Hashtable`的子类,它不保证`key-value`对之间的次序)。|
|`void store(OutputStream out, String comments)`|将 `Properties`中的`key-value`对输出到指定的属性文件(以输出流表示)中。|

## 实例 ##
```java
import java.util.*;
import java.io.*;

public class PropertiesTest
{
	public static void main(String[] args)
		throws Exception
	{
		Properties props = new Properties();
		// 向Properties中增加属性
		props.setProperty("username" , "yeeku");
		props.setProperty("password" , "123456");
		// 将Properties中的key-value对保存到a.ini文件中
		props.store(new FileOutputStream("a.ini")
			, "comment line");   //①
		// 新建一个Properties对象
		Properties props2 = new Properties();
		// 向Properties中增加属性
		props2.setProperty("gender" , "male");
		// 将a.ini文件中的key-value对追加到props2中
		props2.load(new FileInputStream("a.ini") );   //②
		System.out.println(props2);
	}
}
```
上面程序示范了`Properties`类的用法,其中①代码处将`Properties`对象中的`key-value`对写入`a.ini`文件中;②代码处则从`a.ini`文件中读取`key-value`对,并添加到`props2`对象中。编译、运行上面程序,该程序输出结果如下:
```cmd
{password=123456, gender=male, username=yeeku}
```
上面程序还在当前路径下生成了一个`a.ini`文件,该文件的内容如下:
```cmd
#comment line
#Thu Jul 11 17:42:17 CST 2019
password=123456
username=yeeku

```
## 读写XML ##
`Properties`可以把`key-value`对以`XML`文件的形式保存起来,也可以从`XML`文件中加载`key-value`对,相关方法如下。

|方法|描述|
|:---|:---|
|`void loadFromXML(InputStream in)`|将指定输入流上的`XML`文档表示的所有属性加载到此`Properties`表中。|
|`void storeToXML(OutputStream os, String comment)`|把属性表中的键值对保存到到`XML`文件中|
|`void storeToXML(OutputStream os, String comment, String encoding)`|把属性表中的键值对保存到`XML`文件中,并指定编码|
### 实例 ###
```java
package map.test.properties;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.InvalidPropertiesFormatException;
import java.util.Properties;

public class PropertiesXMLTest
{
	public static void main(String[] args)
	{
		Properties props = new Properties();
		// 向Properties中增加属性
		props.setProperty("username", "yeeku");
		props.setProperty("password", "123456");
		// 将Properties中的key-value对保存到a.ini文件中
		try
		{
			props.storeToXML(new FileOutputStream("a.xml"), "这是注释");
		} catch (FileNotFoundException e1)
		{
			e1.printStackTrace();
		} catch (IOException e1)
		{
			e1.printStackTrace();
		}
		// 新建一个Properties对象
		Properties props2 = new Properties();
		// 向Properties中增加属性
		props2.setProperty("gender", "male");
		// 将a.ini文件中的key-value对追加到props2中
		try
		{
			props2.loadFromXML(new FileInputStream("a.xml"));
		} catch (InvalidPropertiesFormatException e)
		{
			e.printStackTrace();
		} catch (FileNotFoundException e)
		{
			e.printStackTrace();
		} catch (IOException e)
		{
			e.printStackTrace();
		}
		System.out.println(props2);
	}
}
```
运行效果:
```cmd
{password=123456, gender=male, username=yeeku}
```
生成`XML`文件内容如下:
```xml
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>这是注释</comment>
<entry key="password">123456</entry>
<entry key="username">yeeku</entry>
</properties>
```
<!--SSTStop-->
# 参考资料 #
[https://docs.oracle.com/javase/9/docs/api/java/util/Properties.html#method.summary](https://docs.oracle.com/javase/9/docs/api/java/util/Properties.html#method.summary)
---
title: 15.1 File类 15.1.1 访问文件和目录
categories: 
  - 疯狂Java讲义 (第4版)
  - 第15章 输入 输出
date: 2019-07-05 23:47:03
updated: 2019-11-02 01:39:01
abbrlink: 69166e8a
---
- [15.1 File类](/ReadingNotes/69166e8a/#15-1-File类)
- [15.1.1 访问文件和目录](/ReadingNotes/69166e8a/#15-1-1-访问文件和目录)
    - [1.访问文件名相关的方法](/ReadingNotes/69166e8a/#1-访问文件名相关的方法)
    - [2.文件检测相关的方法](/ReadingNotes/69166e8a/#2-文件检测相关的方法)
    - [3.获取常规文件信息](/ReadingNotes/69166e8a/#3-获取常规文件信息)
    - [4.文件操作相关的方法](/ReadingNotes/69166e8a/#4-文件操作相关的方法)
    - [5.目录操作相关的方法](/ReadingNotes/69166e8a/#5-目录操作相关的方法)

<!--more-->
<script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.slim.min.js"></script>
<script>$(document).ready(function () {$(".post-body > ul:nth-child(1)").hide();});</script>

<!--end-->
# 15.1 File类 #
`File`类是`java.io`包下代表与平台无关的`文件和目录`,也就是说,如果希望在程序中操作文件和目录都可以通过`File`类来完成。值得指出的是,不管是文件还是目录都是使用`File`来操作的,`File`能新建删除、重命名文件和目录,`File`不能访问文件内容本身。如果需要访问文件内容本身,则需要使用输入/输出流。
# 15.1.1 访问文件和目录 #
`File`类可以使用文件路径字符串来创建`File`实例,该文件路径字符串既可以是绝对路径,也可以是相对路径。在默认情况下,系统总是依据用户的工作路径来解释相对路径,这个路径由系统属性"`user.dir`"指定,通常也就是运行`Java`虚拟机时所在的路径。
一旦创建了`File`对象后,就可以调用`File`对象的方法来访问,`Fle`类提供了很多方法来操作文件和目录,下面列出一些比较常用的方法。
## 1.访问文件名相关的方法 ##

|方法|描述|
|:---|:---|
|`String getName()`|返回此`File`对象所表示的文件名或路径名(如果是路径,则返回最后一级子路径名).|
|`String getPath()`|返回次`File`对象所对应的路径名.|
|`File getAbsoluteFile()`|返回此`File`对象的绝对路径。|
|`String getParent()`|返回此`File`对象所对应目录(最后一级子目录)的父目录名。|
|`boolean renameTo(File new Name)`|重命名此`File`对象所对应的文件或目录,如果重命名成功,则返回`true`;否则返回`false`.|

## 2.文件检测相关的方法 ##

|方法|描述|
|:---|:---|
|`boolean exists()`|判断`File`对象所对应的文件或目录是否存在。|
|`boolean canWrite()`|判断`File`对象所对应的文件和目录是否可写。|
|`boolean canRead()`|判断`File`对象所对应的文件和目录是否可读。|
|`boolean isFile()`|判断`File`对象所对应的是否是文件,而不是目录。|
|`boolean isDirectory()`|判断`File`对象所对应的是否是目录,而不是文件。|
|`boolean isAbsolute()`|判断`File`对象所对应的文件或目录是否是绝对路径。该方法消除了不同平台的差异,可以直接判断`File`对象是否为绝对路径。在`UNIX/Linux/BSD`等系统上,如果路径名开头是一条斜线(`/`),则表明该`File`对象对应一个绝对路径;在 `Windows`等系统上,如果路径开头是盘符,则说明它是一个绝对路径。|

## 3.获取常规文件信息 ##

|方法|描述|
|:---|:---|
|`long lastModified()`|返回文件的最后修改时间|
|`long length()`|返回文件内容的长度。|
## 4.文件操作相关的方法 ##

|方法|描述|
|:---|:---|
|`boolean createNewFile()`|当此`File`对象所对应的文件不存在时,该方法将新建一个该`File`对象所指定的新文件,如果创建成功则返回`true`;否则返回`false`.|
|`boolean delete()`|删除`File`对象所对应的文件或路径。|
|`static File createTempFile(String prefix,String suffix)`|在默认的临时文件目录中创建一个临时的空文件,使用给定前缀、系统生成的随机数和给定后缀作为文件名。这是一个静态方法,可以直接通过`File`类来调用。 `prefix`参数必须至少是3字节长。建议前缀使用一个短的、有意义的字符串,比如"`hjb`或"`mail" suffix`参数可以为`null`,在这种情况下,将使用默认的后缀"`.tmp`"|
|`static File createTempFile(String prefix,String suffix,File directory)`|在`directory`所指定的目录中创建一个临时的空文件,使用给定前缀、系统生成的随机数和给定后缀作为文件名。这是一个静态方法,可以直接通过`File`类来调用。|
|`void deleteOnExit()`|注册一个删除钩子,指定当`Java`虚拟机退出时,删除`File`对象所对应的文件和目录。|
## 5.目录操作相关的方法 ##

|方法|描述|
|:---|:---|
|`boolean mkdir()`|试图创建一个`File`对象所对应的目录,如果创建成功,则返回`true`;否则返回`false`。调用该方法时`File`对象必须对应一个路径,而不是一个文件。|
|`String[] list()`|列出`File`对象的所有子文件名和路径名,返回`String`数组。|
|`File[] listFiles()`|列出`File`对象的所有子文件和路径,返回`File`数组。|
|`static File[] listRoots()`|列出系统所有的根路径。这是一个静态方法,可以直接通过`File`类来调用。|


上面详细列出了`File`类的常用方法,下面程序以几个简单方法来测试一下`File`类的功能。
```java
import java.io.*;

public class FileTest
{
	public static void main(String[] args) throws IOException
	{
		// 以当前路径来创建一个File对象
		File file = new File(".");
		// 直接获取文件名，输出一点
		System.out.println(file.getName());
		// 获取相对路径的父路径可能出错，下面代码输出null
		System.out.println(file.getParent());
		// 获取绝对路径
		System.out.println(file.getAbsoluteFile());
		// 获取上一级路径
		System.out.println(file.getAbsoluteFile().getParent());
		// 在当前路径下创建一个临时文件
		File tmpFile = File.createTempFile("aaa", ".txt", file);
		// 指定当JVM退出时删除该文件
		tmpFile.deleteOnExit();
		// 以系统当前时间作为新文件名来创建新文件
		File newFile = new File(System.currentTimeMillis() + "");
		System.out.println("newFile对象是否存在：" + newFile.exists());
		// 以指定newFile对象来创建一个文件
		newFile.createNewFile();
		// 以newFile对象来创建一个目录，因为newFile已经存在，
		// 所以下面方法返回false，即无法创建该目录
		newFile.mkdir();
		// 使用list()方法来列出当前路径下的所有文件和路径
		String[] fileList = file.list();
		System.out.println("====当前路径下所有文件和路径如下====");
		for (String fileName : fileList)
		{
			System.out.println(fileName);
		}
		// listRoots()静态方法列出所有的磁盘根路径。
		File[] roots = File.listRoots();
		System.out.println("====系统所有根路径如下====");
		for (File root : roots)
		{
			System.out.println(root);
		}
	}
}

```
运行上面程序,效果如下:
```cmd
.
null
G:\Desktop\随书源码\疯狂Java讲义第三版光盘\codes\15\15.1\.
G:\Desktop\随书源码\疯狂Java讲义第三版光盘\codes\15\15.1
newFile对象是否存在：false
====当前路径下所有文件和路径如下====
1562343471185
aaa2114436954429301658.txt
FilenameFilterTest.class
FilenameFilterTest.java
FileTest.class
FileTest.java
====系统所有根路径如下====
C:\
D:\
E:\
F:\
G:\
H:\
```
可以看到程序列出当前路径的所有文件和路径时,列出了程序创建的临时文件,但程序运行结束后,`aaa.txt`临时文件并不存在,因为程序指定虚拟机退出时自动删除该文件。

**注意**
`Windows`的路径分隔符使用反斜线(`\`),而`Java`程序中的反斜线表示转义字符,所以如果需要在`Windows`的路径下包括反斜线,则应该使用两条反斜线,如`F:\\abc\\test.txt`,或者直接使用斜线(`/`)也可以,`Java`程序支持将斜线当成平台无关的路径分隔符.


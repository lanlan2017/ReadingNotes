---
title: 16.1 线程概述 16.1.1 线程和进程
categories: 
  - 疯狂Java讲义 (第4版)
  - 第16章 多线程
  - 16.1 线程概述
date: 2019-07-15 20:45:38
updated: 2019-11-02 01:39:01
abbrlink: 11feab9f
---
- [16.1 线程概述](/ReadingNotes/11feab9f/#16-1-线程概述)
- [16.1.1 线程和进程](/ReadingNotes/11feab9f/#16-1-1-线程和进程)
    - [进程的三个特征](/ReadingNotes/11feab9f/#进程的三个特征)
        - [并发性和并行性的区别](/ReadingNotes/11feab9f/#并发性和并行性的区别)
    - [多进程并发策略](/ReadingNotes/11feab9f/#多进程并发策略)

<!--more-->
<script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.slim.min.js"></script>
<script>$(document).ready(function () {$(".post-body > ul:nth-child(1)").hide();});</script>

<!--end-->
<!--SSTStart-->
# 16.1 线程概述 #
几乎所有的操作系统都支持同时运行多个任务,一个任务通常就是一个程序,每个运行中的程序就是一个进程。
当一个程序运行时,内部可能包含了多个顺序执行流,每个顺序执行流就是一个线程。
# 16.1.1 线程和进程 #
几乎所有的操作系统都支持进程的概念,所有运行中的任务通常对应一个进程(`Process`)。**当一个程序进入内存运行时,即变成一个进程**。进程是处于运行过程中的程序,并且具有一定的独立功能,**进程是系统进行资源分配和调度的一个独立单位**。

## 进程的三个特征 ##
一般而言,进程包含如下三个特征。
- `独立性`:进程是系统中独立存在的实体,它可以拥有自己独立的资源,每一个进程都拥有自己私有的地址空间。在没有经过进程本身允许的情况下,一个用户进程不可以直接访问其他进程的地址空间。
- `动态性`:进程与程序的区别在于,`程序只是一个静态的指令集合`,而进程是一个正在系统中活动的指令集合。在进程中加入了时间的概念。进程具有自己的生命周期和各种不同的状态,这些概念在程序中都是不具备的。
- `并发性`:多个进程可以在单个处理器上并发执行,多个进程之间不会互相影响。

### 并发性和并行性的区别 ###
并发性(`concurrency`)和并行性(`parallel`)是两个概念,
- 并行指在同一时刻,`有多条指令在多个处理器上同时执行`;
- 并发指在`同一时刻只能有一条指令执行,但多个进程指令被快速轮换执行`,使得在宏观上具有多个进程同时执行的效果。

对于一个`CPU`而言,它在某个时间点只能执行一个程序,也就是说,只能运行一个进程,`CPU`不断地在这些进程之间轮换执行。不过因为`CPU`的执行速度相对人的感觉来说实在是太快了,所以虽然`CPU`在多个进程之间轮换执行,但用户感觉到好像有多个进程在同时执行。
## 多进程并发策略 ##
现代的操作系统都支持多进程的并发,但在具体的实现细节上可能因为硬件和操作系统的不同而采用不同的策略。比较常用的方式有:
- `共用式的多任务操作策略`,例如 `Windows3.1`和 `Mac OS9`;
- `抢占式多任务操作策略`,这种策略效率更高,目前操作系统大多采用这种策略,例如 `Windows NT`、 `Windows 2000`以及 `UNIX/Linux`等操作系统。

多线程则扩展了多进程的概念,使得同一个进程可以同时并发处理多个任务。线程(`Thread)`也被称作轻量级进程( `Lightweight Process`),`线程是进程的执行单元`。就像进程在操作系统中的地位一样,`线程在程序中是独立的、并发的执行流`。当进程被初始化后,`主线程`就被创建了。对于绝大多数的应用程序来说,通常仅要求有一个主线程,但也可以在该进程内创建多条顺序执行流,这些顺序执行流就是线程,`每个线程也是互相独立的`。

`线程是进程的组成部分`,`一个进程可以拥有多个线程,一个线程必须有一个父进程`。线程可以拥有自己的`堆栈`、自己的`程序计数器`和自己的`局部变量`,`但不拥有系统资源`,它与父进程的其他线程`共享该进程所拥有的全部资源`。因为多个线程共享父进程里的全部资源,因此编程更加方便;但必须更加小心,因为需要确保线程不会妨碍同一进程里的其他线程。
线程可以完成一定的任务,可以与其他线程共享父进程中的共享变量及部分环境,相互之间协同来完成进程所要完成的任务。
线程是独立运行的,它并不知道进程中是否还有其他线程存在。`线程的执行是抢占式的`,也就是说,当前运行的线程在任何时候都可能被挂起,以便另外一个线程可以运行。
`一个线程可以创建和撤销另一个线程`,同一个进程中的多个线程之间可以并发执行。
从逻辑角度来看,多线程存在于一个应用程序中,让一个应用程序中可以有多个执行部分同时执行,但操作系统无须将多个线程看作多个独立的应用,对多线程实现调度和管理以及资源分配。`线程的调度和管理由进程本身负责完成`。
**简而言之,一个程序运行后至少有一个进程,一个进程里可以包含多个线程,但至少要包含一个线程**

**归纳起来可以这样说:操作系统可以同时执行多个任务,每个任务就是进程;进程可以同时执行多个任务,每个任务就是线程。**
<!--SSTStop-->

